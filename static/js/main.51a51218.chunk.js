(this.webpackJsonp360viewer=this.webpackJsonp360viewer||[]).push([[0],{202:function(o,e,a){},203:function(o,e,a){},206:function(o,e,a){"use strict";a.r(e);var r=a(33),t=a(124),n=a.n(t),i=a(189),s=a.n(i),m=(a(202),a(40)),u=a(41),p=a(196),l=a(193),c=(a(203),a(16)),g=function(){function o(){Object(m.a)(this,o)}return Object(u.a)(o,null,[{key:"disableAllMode",value:function(){o.modePlane=!1}},{key:"disableAllWallMode",value:function(){o.modePlane=!1,o.modePlane_createCorners=!1,o.modePlane_editFromTop=!1,o.modePlane_editWallUV=!1,o.modePlane_editFloorUV=!1}}]),o}();g.currentRoomName="",g.currentWallGroupName="",g.updatefov=!1,g.radius=1600,g.size_ControlBox=40,g.wallYDiffernce=700,g.divPoint=200,g.modePlane=!1,g.modePlane_createCorners=!1,g.modePlane_editWallUV=!1,g.modePlane_editFromTop=!1,g.modePlane_editFloorUV=!1,g.modeCube=!1,g.modeCube_CreateNewCube=!1,g.modeCube_edit_Cube=!1,g.modeCube_updatingCubeCenter=!1,g.modeCube_edit_CubeWallUVPosition=!1,g.modeCube_editRoom=!1,g.wallHeight=0,g.topY=0,g.bottomY=0;var b=function(){function o(e){Object(m.a)(this,o),this.appManager=void 0,this.handler=void 0,this.scene=void 0,this.camera=void 0,this.cursor=void 0,this.boxSize=100,this.distanceY=300,this.distanceD=300,this.createNewButton=void 0,this.editButton=void 0,this.editCubeToggle=void 0,this.buttons=[],this.appManager=e,this.scene=e.sceneManager.getScene(),this.camera=this.appManager.sceneManager.getCamera(),this.handler=this.appManager.handler.getHandler(),this.cursor=this.appManager.DHCursor.getCursor(),this.createNewButton=document.getElementById("NewCube"),this.buttons.push(this.createNewButton),this.editButton=document.getElementById("EditCube"),this.buttons.push(this.editButton),this.editCubeToggle=document.getElementById("EditCubeToggleParent"),this.buttons.push(this.editCubeToggle)}return Object(u.a)(o,[{key:"disableAllCube",value:function(){for(var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup),e=0;e<o.length;e++){var a=o[e];console.log(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[a].cubeRoot),this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[a].cubeRoot.setEnabled(!1)}}},{key:"enableAllCube",value:function(){for(var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup),e=0;e<o.length;e++){var a=o[e];console.log(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[a].cubeRoot),this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[a].cubeRoot.setEnabled(!0)}}},{key:"disableAllCubeButton",value:function(){this.buttons.forEach((function(o){o.style.display="none"})),this.editCubeToggle.checked=!1}},{key:"enableDefaultOptionsUI",value:function(){if(this.disableAllCubeButton(),g.modeCube){var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup);null!=this.createNewButton&&(this.createNewButton.style.display="block"),null!=this.editButton&&o.length>0&&(this.editButton.style.display="block")}this.appManager.gizmoHandler.attachOnMesh(null),g.modeCube_CreateNewCube=!1,g.modeCube_edit_Cube=!1,g.modeCube_updatingCubeCenter=!1,g.modeCube_edit_CubeWallUVPosition=!1}},{key:"enableNewCubeCreation",value:function(){var o=this;this.disableAllCubeButton(),g.modeCube_CreateNewCube=!0,g.modeCube_edit_Cube=!1,g.modeCube_updatingCubeCenter=!1,g.modeCube_edit_CubeWallUVPosition=!1,this.appManager.gizmoHandler.attachOnMesh(null),this.appManager.DHCursor.updateMsg("Double Click to create a cube"),Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup).forEach((function(e){o.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[e].hasOwnProperty("cubeCenterPointsBoxes")&&o.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[e].cubeCenterPointsBoxes.forEach((function(o){o.isVisible=!1}))}))}},{key:"enableEditRoom",value:function(){var o=this;this.disableAllCubeButton(),g.modeCube_CreateNewCube=!1,g.modeCube_edit_Cube=!0,g.modeCube_updatingCubeCenter=!1,g.modeCube_edit_CubeWallUVPosition=!1,this.appManager.gizmoHandler.attachOnMesh(null),Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup).forEach((function(e){o.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[e].hasOwnProperty("cubeCenterPointsBoxes")&&o.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[e].cubeCenterPointsBoxes.forEach((function(o){o.isVisible=!0}))}))}},{key:"uiCreateCube",value:function(){}},{key:"uiEditCube",value:function(){this.disableAllCubeButton(),g.modeCube_CreateNewCube=!1,this.editCubeToggle.checked=!1,g.modeCube_edit_Cube=!0,g.modeCube_updatingCubeCenter=!1,g.modeCube_edit_CubeWallUVPosition=!1,this.appManager.DHCursor.updateMsg("Select points to edit Cube"),null!=this.createNewButton&&(this.createNewButton.style.display="block"),null!=this.editCubeToggle&&(this.editCubeToggle.style.display="block")}},{key:"EditCubeUV",value:function(o){g.modeCube_edit_CubeWallUVPosition=o}},{key:"createCube",value:function(o){var e,a=this,r="Cube_"+Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup).length,t={cubeName:r,cubeRoot:new c.m(r+"_ROOT"),roomName:g.currentRoomName};t.cubeRoot.setPivotPoint(new c.o(o.x,o.y,o.z)),(e=this.handler.createBox(o,"Center_"+r)).setParent(t.cubeRoot),e.position.set(o.x,o.y,o.z),e.tag="center",t.centerPosition={x:o.x,y:o.y,z:o.z},t.cubePosition=e.position,t.cubeRotation=e.rotation,t.center=e,e.renderingGroupId=2;var n=[];n.push(new c.o(o.x-this.distanceD,o.y-this.distanceY,o.z+this.distanceD)),n.push(new c.o(o.x+this.distanceD,o.y-this.distanceY,o.z+this.distanceD)),n.push(new c.o(o.x-this.distanceD,o.y+this.distanceY,o.z+this.distanceD)),n.push(new c.o(o.x+this.distanceD,o.y+this.distanceY,o.z+this.distanceD)),n.push(new c.o(o.x-this.distanceD,o.y-this.distanceY,o.z-this.distanceD)),n.push(new c.o(o.x+this.distanceD,o.y-this.distanceY,o.z-this.distanceD)),n.push(new c.o(o.x-this.distanceD,o.y+this.distanceY,o.z-this.distanceD)),n.push(new c.o(o.x+this.distanceD,o.y+this.distanceY,o.z-this.distanceD));for(var i=[],s=0;s<n.length;s++){var m=e.clone("CubeCornerBox_"+r);console.log(m),m.tag="cubeCornerBox__",m.setParent(t.cubeRoot),m.position.set(n[s].x,n[s].y,n[s].z),m.rotation.y=m.rotation.y+180,m.index=s,m.cubeName=t.cubeName,m.renderingGroupId=2,m.isPickable=!1,m.computeWorldMatrix(!0),i.push(m)}var u=[],p=[];p.push(new c.o(o.x,o.y+this.distanceY,o.z)),p.push(new c.o(o.x,o.y-this.distanceY,o.z)),p.push(new c.o(o.x,o.y,o.z-this.distanceD)),p.push(new c.o(o.x,o.y,o.z+this.distanceD)),p.push(new c.o(o.x+this.distanceD,o.y,o.z)),p.push(new c.o(o.x-this.distanceD,o.y,o.z));for(var l=function(o){(h=new c.d("dynamic texture",{width:512,height:256},a.scene,!1)).getContext(),(M=new c.k("Mat",a.scene)).diffuseTexture=h,M.backFaceCulling=!1,M.specularColor=new c.c(0,0,0),"bold 200px monospace",h.drawText(o.toString(),180,190,"bold 200px monospace","Red","pink",!0,!0),(m=e.clone("CubeCornerBox_"+r)).position=p[o],m.setParent(t.cubeRoot),m.tag="cubeCornerBox",m.cubeName=t.cubeName,m.roomName=t.roomName,1==o?m.control="bottom":0==o?m.control="top":o>1&&(m.control="middle"),m.material=M,m.index=o,m.renderingGroupId=3,m.computeWorldMatrix(!0),u.push(m),u[o].actionManager=new c.a(a.scene),d="",u[o].actionManager.registerAction(new c.e(c.a.OnPointerOverTrigger,(function(){g.modeCube_edit_Cube&&(d=a.cursor[0].textContent,a.appManager.DHCursor.updateMsg("Click to Select"))}))),u[o].actionManager.registerAction(new c.e(c.a.OnPointerOutTrigger,(function(){g.modeCube_edit_Cube&&a.appManager.DHCursor.updateMsg(d)}))),u[o].actionManager.registerAction(new c.e(c.a.OnPickDownTrigger,(function(){if(g.modeCube_edit_Cube){g.modeCube_updatingCubeCenter=!1;a.scene.pick(a.scene.pointerX,a.scene.pointerY);a.appManager.gizmoHandler.attachOnMesh(u[o]),console.log(a.appManager.gizmoHandler.gizmoManager),a.appManager.gizmoHandler.gizmoManager.positionGizmoEnabled=!0,a.appManager.gizmoHandler.gizmoManager.rotationGizmoEnabled=!1,a.appManager.gizmoHandler.gizmoManager.scaleGizmoEnabled=!1,a.updateController(u[o])}}))),u[o].isVisible=!0},b=0;b<p.length;b++){var h,M,d;l(b)}t.cubeCenterPoints=p,t.cubeCenterPointsBoxes=u,t.cubeCornerPoints=n,t.cubeCornerPointsUV=n,t.cubeCornerPointsBoxes=i,t.cube=[],t.cube.push(this.createCubePlane("front",n[0],n[2],n[3],n[1],!1,t)),t.cube.push(this.createCubePlane("left",n[1],n[3],n[7],n[5],!1,t)),t.cube.push(this.createCubePlane("back",n[5],n[7],n[6],n[4],!1,t)),t.cube.push(this.createCubePlane("right",n[4],n[6],n[2],n[0],!1,t)),t.cube.push(this.createCubePlane("top",n[3],n[7],n[6],n[2],!0,t)),t.cube.push(this.createCubePlane("bottom",n[1],n[5],n[4],n[0],!0,t)),this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[t.cubeName]=t,e.actionManager=new c.a(this.scene),e.actionManager.registerAction(new c.e(c.a.OnPickDownTrigger,(function(){console.log(">>>>>>>>>"),g.modeCube&&g.modeCube_edit_Cube&&console.log(g)}))),t.cubeRoot.setParent(this.appManager.roomManager.RoomData[g.currentRoomName].parentGroup),this.disableAllCubeButton(),g.modeCube&&(null!=this.createNewButton&&(this.createNewButton.style.display="block"),null!=this.editCubeToggle&&(this.editCubeToggle.style.display="block")),g.modeCube_CreateNewCube=!1,this.editCubeToggle.checked=!1,g.modeCube_edit_Cube=!0,g.modeCube_updatingCubeCenter=!1,g.modeCube_edit_CubeWallUVPosition=!1,this.appManager.DHCursor.updateMsg("Select points to edit Cube")}},{key:"createCubeFromJson",value:function(o){var e,a=this,r=o.cubeName,t={cubeName:r,cubeRoot:new c.m(r+"_ROOT")};console.log(t),t.roomName=o.roomName;var n=new BABYLON.Vector3(o.centerPosition.x,o.centerPosition.y,o.centerPosition.z);t.cubeRoot.setPivotPoint(new c.o(n.x,n.y,n.z)),(e=this.handler.createBox(n,"Center_"+r)).setParent(t.cubeRoot),e.position.set(n.x,n.y,n.z),e.tag="center",t.centerPosition={x:n.x,y:n.y,z:n.z},t.cubePosition=e.position,t.cubeRotation=e.rotation,t.center=e,e.renderingGroupId=2;for(var i=[],s=[],m=0;m<o.cubeCornerPoints.length;m++){var u=e.clone("CubeCornerBox_"+r);console.log(u),u.tag="cubeCornerBox__",u.setParent(t.cubeRoot),u.position.set(o.cubeCornerPoints[m].x,o.cubeCornerPoints[m].y,o.cubeCornerPoints[m].z),i.push(u.position),u.rotation.y=u.rotation.y+180,u.index=m,u.cubeName=t.cubeName,u.renderingGroupId=2,u.isPickable=!1,u.computeWorldMatrix(!0),s.push(u)}for(var p=[],l=[],b=function(e){(M=new c.d("dynamic texture",{width:512,height:256},a.scene,!1)).getContext(),(d=new c.k("Mat",a.scene)).diffuseTexture=M,d.backFaceCulling=!1,d.specularColor=new c.c(0,0,0),"bold 200px monospace",M.drawText(e.toString(),180,190,"bold 200px monospace","Red","pink",!0,!0),console.log(u),(u=a.handler.createBox(o.cubeCenterPoints[e],"Center_"+r)).setParent(t.cubeRoot),u.tag="cubeCornerBox",u.cubeName=t.cubeName,u.roomName=t.roomName,1==e?u.control="bottom":0==e?u.control="top":e>1&&(u.control="middle"),u.material=d,u.index=e,u.renderingGroupId=3,u.computeWorldMatrix(!0),p.push(u),p[e].actionManager=new c.a(a.scene),l.push(u.position),N="",p[e].actionManager.registerAction(new c.e(c.a.OnPointerOverTrigger,(function(){g.modeCube_edit_Cube&&(N=a.cursor[0].textContent,a.appManager.DHCursor.updateMsg("Click to Select"))}))),p[e].actionManager.registerAction(new c.e(c.a.OnPointerOutTrigger,(function(){g.modeCube_edit_Cube&&a.appManager.DHCursor.updateMsg(N)}))),p[e].actionManager.registerAction(new c.e(c.a.OnPickDownTrigger,(function(){if(g.modeCube_edit_Cube){g.modeCube_updatingCubeCenter=!1;a.scene.pick(a.scene.pointerX,a.scene.pointerY);a.appManager.gizmoHandler.attachOnMesh(p[e]),console.log(a.appManager.gizmoHandler.gizmoManager),a.appManager.gizmoHandler.gizmoManager.positionGizmoEnabled=!0,a.appManager.gizmoHandler.gizmoManager.rotationGizmoEnabled=!1,a.appManager.gizmoHandler.gizmoManager.scaleGizmoEnabled=!1,a.updateController(p[e])}}))),p[e].isVisible=!0},h=0;h<o.cubeCenterPoints.length;h++){var M,d,N;b(h)}t.cubeCenterPoints=l,t.cubeCenterPointsBoxes=p,t.cubeCornerPoints=i,t.cubeCornerPointsUV=i,t.cubeCornerPointsBoxes=s,t.cube=[];for(var D=0;D<o.cube.length;D++){var R=o.cube[D];t.cube.push(this.createCubePlaneFromJson(R,t))}console.log(this.appManager.roomManager.RoomData[o.roomName]),console.log(t.cubeName),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[t.cubeName]=t,e.actionManager=new c.a(this.scene),e.actionManager.registerAction(new c.e(c.a.OnPickDownTrigger,(function(){}))),t.cubeRoot.setParent(this.appManager.roomManager.RoomData[o.roomName].parentGroup),this.disableAllCubeButton(),g.modeCube&&(null!=this.createNewButton&&(this.createNewButton.style.display="block"),null!=this.editCubeToggle&&(this.editCubeToggle.style.display="block")),g.modeCube_CreateNewCube=!1,this.editCubeToggle.checked=!1,g.modeCube_edit_Cube=!0,g.modeCube_updatingCubeCenter=!1,g.modeCube_edit_CubeWallUVPosition=!1,this.appManager.DHCursor.updateMsg("Select points to edit Cube")}},{key:"createCubePlaneFromJson",value:function(o,e){var a={},r=o.vertexData.uvs,t=new c.g("cubewall_"+o.name,this.scene);t.tag="cubewall";var n=[];Object.keys(o.vertexData.positions).forEach((function(e){n.push(o.vertexData.positions[e])}));var i=o.vertexData.indices,s=[];o.vertexData.hasOwnProperty("normals")&&(s=o.vertexData.normals);var m=new BABYLON.VertexData;return BABYLON.VertexData.ComputeNormals(n,i,s),m.positions=n,m.indices=i,o.vertexData.hasOwnProperty("normals")&&(m.normals=s),m.uvs=r,m.applyToMesh(t),t.material=this.appManager.roomManager.RoomData[e.roomName].material,t.cubeName=e.cubeName,t.roomName=e.roomName,t.faceName=o.name,t.name=o.name,t.renderingGroupId=1,a.faceName=o.name,a.roomName=e.roomName,a.cubeName=e.cubeName,a.vertexData=m,a.plane=t,t.setParent(e.cubeRoot),t.isPickable=!1,a}},{key:"createCubePlane",value:function(o,e,a,r,t,n,i){var s=this,m={},u=[];u.push(e),u.push(a);for(var p=this.handler.getPoints(r,a),l=this.handler.getPoints(t,e),b=0;b<g.divPoint-1;b++)u.push(p[b]),u.push(l[b]);u.push(r),u.push(t);var h=[];u.forEach((function(o){var e=c.o.Project(o,c.f.Identity(),s.scene.getTransformMatrix(),s.camera.viewport.toGlobal(s.appManager.sceneManager.getEngine().getRenderWidth(),s.appManager.sceneManager.getEngine().getRenderHeight())),a=s.handler.getUvPoint(e);h.push(a.x),h.push(a.y)}));var M=new c.g("cubewall_"+o,this.scene);M.material=this.appManager.roomManager.RoomData[g.currentRoomName].material,M.tag="cubewall";var d=this.handler.getPosition(u),N=!0,D=0,R=[];for(b=0;b<g.divPoint;b++)N?(R.push(D++),R.push(D++),R.push(++D),R.push(D-2),R.push(D-1),R.push(D),N=!N):(R.push(D--),R.push(D),D+=3,R.push(D),R.push(D-3),R.push(D-1),R.push(D));var C=[],G=new c.p;return c.p.ComputeNormals(d,R,C),G.positions=d,n||(G.normals=C),G.indices=R,G.uvs=h,G.applyToMesh(M),M.cubeName=i.cubeName,M.roomName=i.roomName,M.faceName=o,M.name=o,M.renderingGroupId=1,m.faceName=o,m.roomName=i.roomName,m.cubeName=i.cubeName,m.vertexData=G,m.plane=M,M.setParent(i.cubeRoot),M.isPickable=!1,m}},{key:"updateController",value:function(o){var e=!1;console.log(o.cubeName),2==o.index?e=this.updateCubeGizmo(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position):3==o.index?e=this.updateCubeGizmo(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position):4==o.index?e=this.updateCubeGizmo(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position):5==o.index?e=this.updateCubeGizmo(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position):0!=o.index&&1!=o.index||(this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.xGizmo.scaleRatio=0,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.yGizmo.scaleRatio=1,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.zGizmo.scaleRatio=0),o.greater=e}},{key:"updateCubeGizmo",value:function(o,e){var a=o.x-e.x,r=o.y-e.y,t=o.z-e.z;a<0&&(a=-a),r<0&&(r=-r),t<0&&(t=-t);var n=!1;return a>=r&&a>=t?(this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.xGizmo.scaleRatio=1,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.yGizmo.scaleRatio=0,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.zGizmo.scaleRatio=0,o.x>e.x&&(n=!0)):r>=a&&r>=t?(this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.xGizmo.scaleRatio=0,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.yGizmo.scaleRatio=1,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.zGizmo.scaleRatio=0,o.y>e.y&&(n=!0)):(this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.xGizmo.scaleRatio=0,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.yGizmo.scaleRatio=0,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.zGizmo.scaleRatio=1,o.z>e.z&&(n=!0)),this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.xGizmo.scaleRatio=1,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.yGizmo.scaleRatio=1,this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.zGizmo.scaleRatio=1,n}},{key:"ondragCubePoints",value:function(o,e,a){console.log(o.roomName),console.log(o.cubeName),console.log(this.appManager.roomManager),console.log(this.appManager.roomManager.RoomData[o.roomName]);if("cubeCornerBox"===o.tag){if(console.log(o),console.log(e),console.log(a),2==o.index&&"x"==a)if(o.greater)if(o.position.x>this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x+0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[6].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[7].x=o.position.x,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[6].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[7].x=o.position.x),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[4].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[5].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[6].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[7].position.x=o.position.x;var r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position);this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x=r.x}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x+0;else if(o.position.x<this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x-0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[6].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[7].x=o.position.x,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[6].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[7].x=o.position.x),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[4].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[5].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[6].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[7].position.x=o.position.x;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position);this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x=r.x}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x-0;else if(2==o.index&&"z"==a)if(o.greater)if(o.position.z>this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z+0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[6].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[7].z=o.position.z,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[6].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[7].z=o.position.z),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[4].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[5].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[6].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[7].position.z=o.position.z;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position);this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z=r.z}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z+0;else if(o.position.z<this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z-0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[6].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[7].z=o.position.z,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[6].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[7].z=o.position.z),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[4].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[5].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[6].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[7].position.z=o.position.z;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position);console.log(r),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z=r.z}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z-0;else if(3==o.index&&"x"==a)if(o.greater)if(o.position.x>this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x+0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[3].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[0].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[1].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[3].x=o.position.x,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[0].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[1].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[3].x=o.position.x),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[0].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[1].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[2].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[3].position.x=o.position.x;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position);this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x=r.x}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x+0;else if(o.position.x<this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x-0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[3].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[0].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[1].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[3].x=o.position.x,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[0].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[1].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[3].x=o.position.x),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[0].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[1].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[2].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[3].position.x=o.position.x;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position);this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x=r.x}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x-0;else if(3==o.index&&"z"==a)if(o.greater)if(o.position.z>this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z+0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[3].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[0].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[1].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[3].z=o.position.z,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[0].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[1].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[3].z=o.position.z),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[0].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[1].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[2].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[3].position.z=o.position.z;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position);console.log(r),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z=r.z}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z+0;else if(o.position.z<this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z-0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[3].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[0].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[1].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[3].z=o.position.z,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[0].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[1].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[3].z=o.position.z),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[0].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[1].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[2].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[3].position.z=o.position.z;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position);console.log(r),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z=r.z}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z-0;else if(4==o.index&&"x"==a)if(o.greater)if(o.position.x>this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x+0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[1].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[3].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[7].x=o.position.x,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[1].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[3].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[7].x=o.position.x),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[1].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[3].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[5].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[7].position.x=o.position.x;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position);this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x=r.x}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x+0;else if(o.position.x<this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x-0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[1].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[3].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[7].x=o.position.x,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[1].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[3].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[7].x=o.position.x),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[1].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[3].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[5].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[7].position.x=o.position.x;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position);this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x=r.x}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x-0;else if(4==o.index&&"z"==a)if(o.greater)if(o.position.z>this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z+0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[1].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[3].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[7].z=o.position.z,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[1].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[3].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[7].z=o.position.z),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[1].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[3].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[5].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[7].position.z=o.position.z;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position);console.log(r),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z=r.z}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z+0;else if(o.position.z<this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z-0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[1].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[3].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[7].z=o.position.z,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[1].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[3].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[7].z=o.position.z),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[1].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[3].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[5].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[7].position.z=o.position.z;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position);console.log(r),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z=r.z}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z-0;else if(5==o.index&&"x"==a)if(o.greater)if(o.position.x>this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x+0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[0].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[6].x=o.position.x,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[0].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[6].x=o.position.x),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[0].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[2].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[4].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[6].position.x=o.position.x;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position);this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x=r.x}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x+0;else if(o.position.x<this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x-0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[5].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[0].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[6].x=o.position.x,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[0].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[2].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[4].x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[6].x=o.position.x),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[0].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[2].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[4].position.x=o.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[6].position.x=o.position.x;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position);this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.x=r.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x=r.x}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.x=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.x-0;else if(5==o.index&&"z"==a)if(o.greater)if(o.position.z>this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z+0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[0].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[6].z=o.position.z,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[0].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[6].z=o.position.z),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[0].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[2].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[4].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[6].position.z=o.position.z;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position);console.log(r),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z=r.z}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z+0;else if(o.position.z<this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z-0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[5].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[0].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[6].z=o.position.z,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[0].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[2].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[4].z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[6].z=o.position.z),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[0].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[2].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[4].position.z=o.position.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[6].position.z=o.position.z;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position);console.log(r),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.z=r.z,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z=r.z}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.z=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.z-0;else if(0==o.index&&"y"==a)if(o.position.y>this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.y+0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[0].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[2].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[3].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[6].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[7].y=o.position.y,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[2].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[3].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[6].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[7].y=o.position.y),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[2].position.y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[3].position.y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[6].position.y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[7].position.y=o.position.y;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position);console.log(r),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.y=r.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.y=r.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.y=r.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.y=r.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.y=r.y}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.y=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.y+0;else if(1==o.index&&"y"==a)if(o.position.y<this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.y-0){this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPoints[1].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[0].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[1].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[4].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPoints[5].y=o.position.y,g.modeCube_edit_CubeWallUVPosition&&(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[0].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[1].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[4].y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsUV[5].y=o.position.y),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[0].position.y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[1].position.y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[4].position.y=o.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCornerPointsBoxes[5].position.y=o.position.y;r=c.o.Center(o.position,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position);console.log(r),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[4].position.y=r.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[5].position.y=r.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[2].position.y=r.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[3].position.y=r.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.y=r.y}else this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[1].position.y=this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeCenterPointsBoxes[0].position.y-0;this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].cubeRoot.setPivotPoint(new c.o(this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.y,this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z)),this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].centerPosition={x:this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.x,y:this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.y,z:this.appManager.roomManager.RoomData[o.roomName].cubeGroup[o.cubeName].center.position.z}}else console.log(a),console.log(e)}},{key:"updateCube",value:function(o){console.log("updateCube"),this.updateCubePlane(0,o.cubeName,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[0],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[2],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[3],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[1],!1),this.updateCubePlane(1,o.cubeName,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[1],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[3],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[7],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[5],!1),this.updateCubePlane(2,o.cubeName,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[5],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[7],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[6],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[4],!1),this.updateCubePlane(3,o.cubeName,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[4],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[6],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[2],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[0],!1),this.updateCubePlane(4,o.cubeName,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[3],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[7],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[6],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[2],!0),this.updateCubePlane(5,o.cubeName,this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[1],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[5],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[4],this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[o.cubeName].cubeCornerPoints[0],!0)}},{key:"updateCubePlane",value:function(o,e,a,r,t,n,i){var s=this;try{var m=[];m.push(a),m.push(r);for(var u=this.handler.getPoints(t,r),p=this.handler.getPoints(n,a),l=0;l<g.divPoint-1;l++)m.push(u[l]),m.push(p[l]);m.push(t),m.push(n);var b=[];g.modeCube_edit_CubeWallUVPosition&&m.forEach((function(o){var e=c.o.Project(o,c.f.Identity(),s.scene.getTransformMatrix(),s.camera.viewport.toGlobal(s.appManager.sceneManager.getEngine().getRenderWidth(),s.appManager.sceneManager.getEngine().getRenderHeight())),a=s.handler.getUvPoint(e);b.push(a.x),b.push(a.y)}));var h=this.handler.getPosition(m),M=!0,d=0,N=[];for(l=0;l<g.divPoint;l++)M?(N.push(d++),N.push(d++),N.push(++d),N.push(d-2),N.push(d-1),N.push(d),M=!M):(N.push(d--),N.push(d),d+=3,N.push(d),N.push(d-3),N.push(d-1),N.push(d));var D=[],R=new BABYLON.VertexData;BABYLON.VertexData.ComputeNormals(h,N,D),R.positions=h,R.indices=N,i||(R.normals=D),g.modeCube_edit_CubeWallUVPosition&&(R.uvs=b),R.applyToMesh(this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[e].cube[o].plane),this.appManager.roomManager.RoomData[g.currentRoomName].cubeGroup[e].cube[o].vertexData=R}catch(C){console.log(C)}}}]),o}(),h=function(){function o(e){Object(m.a)(this,o),this.appManager=void 0,this.handler=void 0,this.scene=void 0,this.camera=void 0,this.editRoomPosButton=void 0,this.editRoomElementPosButton=void 0,this.editRoomDoneButton=void 0,this.buttons=[],this.appManager=e,this.scene=e.sceneManager.getScene(),this.camera=this.appManager.sceneManager.getCamera(),this.handler=this.appManager.handler.getHandler(),this.editRoomPosButton=document.getElementById("EditRoomPosition"),this.buttons.push(this.editRoomPosButton),this.editRoomElementPosButton=document.getElementById("EditRoomElementPosition"),this.buttons.push(this.editRoomElementPosButton),this.editRoomDoneButton=document.getElementById("DoneRoomEdit"),this.buttons.push(this.editRoomDoneButton)}return Object(u.a)(o,[{key:"disableAllButton",value:function(){this.buttons.forEach((function(o){o.style.display="none"}))}},{key:"EditRoomPosition",value:function(){this.disableAllButton(),null!=this.editRoomElementPosButton&&(this.editRoomElementPosButton.style.display="block"),null!=this.editRoomDoneButton&&(this.editRoomDoneButton.style.display="block")}},{key:"EditRoomElementPosition",value:function(){this.disableAllButton(),null!=this.editRoomPosButton&&(this.editRoomPosButton.style.display="block"),null!=this.editRoomDoneButton&&(this.editRoomDoneButton.style.display="block")}},{key:"DoneRoomEdit",value:function(){this.disableAllButton()}}]),o}(),M=a(190),d=function(){function o(e){Object(m.a)(this,o),this.appManager=void 0,this.jsonData={Rooms:{"ProjectID_R0010286_20170913092820.JPG":{url:"assets/inhouse/flat2/R0010286_20170913092820.JPG"},"ProjectID_R0010287_20170913092842.JPG":{url:"assets/inhouse/flat2/R0010287_20170913092842.JPG"}}},this.loadedJson=void 0,this.appManager=e,this.getLocalJson()}return Object(u.a)(o,[{key:"readJson",value:function(o){var e=this;M.get(o+"Room.json").done((function(o){console.log(o),e.processData(o)})).fail((function(){console.log("response")}))}},{key:"getLocalJson",value:function(){var o=this;console.log("* GET LOCAL SETTING *");var e=["Room.json"].map((function(o){return fetch("assets".concat("/",o))}));Promise.all(e).then((function(o){return Promise.all(o.map((function(o){return o.json()})))})).then((function(e){console.log("Json DONE"),console.log(e[0]),o.appManager.roomManager.initRoomData(e[0])}))}},{key:"processData",value:function(o){}},{key:"exportTojson",value:function(){var o=this;this.jsonData.RoomHeightData={},this.jsonData.RoomHeightData={wallHeight:g.wallHeight,topY:g.topY,bottomY:g.bottomY},Object.keys(this.jsonData.Rooms).forEach((function(e){if(o.appManager.roomManager.RoomData.hasOwnProperty(e)){var a={};console.log(o.appManager.roomManager.RoomData[e]),void 0!=o.appManager.roomManager.RoomData[e].parentGroup?a.parentGroupTransform={position:{x:o.appManager.roomManager.RoomData[e].parentGroup.position.x,y:o.appManager.roomManager.RoomData[e].parentGroup.position.y,z:o.appManager.roomManager.RoomData[e].parentGroup.position.z},rotation:{x:o.appManager.roomManager.RoomData[e].parentGroup.rotation.x,y:o.appManager.roomManager.RoomData[e].parentGroup.rotation.y,z:o.appManager.roomManager.RoomData[e].parentGroup.rotation.z},scaling:{x:o.appManager.roomManager.RoomData[e].parentGroup.scaling.x,y:o.appManager.roomManager.RoomData[e].parentGroup.scaling.y,z:o.appManager.roomManager.RoomData[e].parentGroup.scaling.z}}:a.ParentTransform={},a.wallGroup={};var r=Object.keys(o.appManager.roomManager.RoomData[e].wallGroup);if(o.appManager.roomManager.RoomData[e].wallGroup)for(var t=0;t<r.length;t++){var n=r[t];if(a.wallGroup[n]={},o.appManager.roomManager.RoomData[e].wallGroup.hasOwnProperty(n)&&o.appManager.roomManager.RoomData[e].wallGroup[n].hasOwnProperty("WallsData")){a.wallGroup[n].WallsData={};var i=Object.keys(o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData);console.log(o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData);for(var s=0;s<i.length;s++){var m=i[s],u={cornersPos:[]};if(u.wallName=o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].wallName,u.roomName=o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].roomName,u.wallGroupName=o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].wallGroupName,u.vertexData=o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].vertexData,console.log(m),console.log(o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m]),o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].hasOwnProperty("cornersPos"))for(var p=0;p<o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].cornersPos.length;p++){var l={x:o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].cornersPos[p].x,y:o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].cornersPos[p].y,z:o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].cornersPos[p].z};u.cornersPos.push(l)}if(u.uvPointsPos=[],o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].hasOwnProperty("uvPointsPos"))for(var c=0;c<o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].uvPointsPos.length;c++){l={x:o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].uvPointsPos[c].x,y:o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].uvPointsPos[c].y,z:o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].uvPointsPos[c].z};u.uvPointsPos.push(l)}o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].hasOwnProperty("name")&&(u.name=o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].name,u.vertexData=o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].vertexData,void 0!=o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].isVisible?u.isVisible=o.appManager.roomManager.RoomData[e].wallGroup[n].WallsData[m].isVisible:u.isVisible=!0),a.wallGroup[n].WallsData[m]=u}}}a.cubeGroup={},Object.keys(o.appManager.roomManager.RoomData[e].cubeGroup).forEach((function(r){console.log(o.appManager.roomManager.RoomData[e].cubeGroup[r]);var t={};t.cubeName=r,t.roomName=e,t.centerPosition={x:o.appManager.roomManager.RoomData[e].cubeGroup[r].centerPosition.x,y:o.appManager.roomManager.RoomData[e].cubeGroup[r].centerPosition.y,z:o.appManager.roomManager.RoomData[e].cubeGroup[r].centerPosition.z},t.cubePosition={x:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubePosition.x,y:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubePosition.y,z:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubePosition.z},t.cubeRotation={x:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeRotation.x,y:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeRotation.y,z:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeRotation.z},t.cubeScaling={x:o.appManager.roomManager.RoomData[e].cubeGroup[r].center.scaling.x,y:o.appManager.roomManager.RoomData[e].cubeGroup[r].center.scaling.y,z:o.appManager.roomManager.RoomData[e].cubeGroup[r].center.scaling.z},t.cubeCenterPoints=[];for(var n=0;n<o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCenterPointsBoxes.length;n++){var i={x:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCenterPointsBoxes[n].position.x,y:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCenterPointsBoxes[n].position.y,z:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCenterPointsBoxes[n].position.z};t.cubeCenterPoints.push(i)}t.cubeCornerPoints=[];for(var s=0;s<o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCornerPointsBoxes.length;s++){i={x:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCornerPointsBoxes[s].position.x,y:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCornerPointsBoxes[s].position.y,z:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCornerPointsBoxes[s].position.z};t.cubeCornerPoints.push(i)}t.cubeCornerPointsUV=[];for(var m=0;m<o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCornerPointsUV.length;m++){i={x:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCornerPointsUV[m].x,y:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCornerPointsUV[m].y,z:o.appManager.roomManager.RoomData[e].cubeGroup[r].cubeCornerPointsUV[m].z};t.cubeCornerPointsUV.push(i)}t.cube=[];for(var u=0;u<o.appManager.roomManager.RoomData[e].cubeGroup[r].cube.length;u++){var p=o.appManager.roomManager.RoomData[e].cubeGroup[r].cube[u],l={};l.faceName=p.faceName,l.roomName=p.roomName,l.cubeName=p.cubeName,l.vertexData=p.vertexData,t.cube.push(l)}console.log(t),console.log(r),console.log(t),a.cubeGroup[r]=t,console.log(a.cubeGroup[r])})),o.jsonData.Rooms[e].data=a}})),console.log(this.jsonData),this.saveJSON(this.jsonData,"Room.json")}},{key:"saveJSON",value:function(o,e){console.log(o);var a=JSON.stringify(o);console.log(a);var r=document.createElement("a");r.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(a)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}]),o}(),N=function(){function o(e){Object(m.a)(this,o),this.appManager=void 0,this.RoomData={},this.room_Images=[],this.scene=void 0,this.imageTask=void 0,this.textureTask=void 0,this.roomMaterials=[],this.CurrentRoomName=void 0,this.appManager=e,this.scene=this.appManager.sceneManager.getScene(),this.room_Images=[],this.roomMaterials=[]}return Object(u.a)(o,[{key:"setupAssetMnager",value:function(){}},{key:"initRoomData",value:function(o){var e=this;console.log("data"),console.log(o);var a="",r=document.getElementById("accordionpanelChangeRoom"),t=document.getElementById("accordionpanelEnableRoom");o.hasOwnProperty("RoomHeightData")&&(g.wallHeight=o.RoomHeightData.wallHeight,g.topY=o.RoomHeightData.topY,g.bottomY=o.RoomHeightData.bottomY);for(var n=Object.keys(o.Rooms),i=function(){var i=n[s];m=e.appManager.materialManager.getMaterial(o.Rooms[i].url),e.createRoomObject(i,m),(u=document.createElement("input")).setAttribute("class","accordionbutton"),u.setAttribute("value","Room_"+i),u.setAttribute("type","button"),u.addEventListener("click",(function(o){e.changeRoom(i)}),!0),r.appendChild(u),(p=document.createElement("input")).setAttribute("class","accordionbutton"),p.setAttribute("value","Room_"+i),p.setAttribute("type","button"),t.appendChild(p),0==s?(console.log("First Image Loaded ",Object.keys(o.Rooms).length),a=i):s==Object.keys(o.Rooms).length-1&&(console.log("Last Image Loaded"),console.log(e.RoomData),e.changeRoom(a),console.log(r),console.log(t)),1==Object.keys(o.Rooms).length&&(console.log("Last Image Loaded"),console.log(e.RoomData),e.changeRoom(a),console.log(r),console.log(t)),o.Rooms[i].hasOwnProperty("data")&&(l=o.Rooms[i].data,Object.keys(l.wallGroup).forEach((function(o){e.appManager.roomManager.RoomData[i].wallGroup[o]=e.appManager.roomManager.createWallGroup(o,i),Object.keys(l.wallGroup[o].WallsData).forEach((function(a){console.log(a),e.appManager.wallGeometry.createPlaneFromJson(l.wallGroup[o].WallsData[a],i,o)}))})),Object.keys(l.cubeGroup).forEach((function(o){console.log(o),e.appManager.cubeGeometry.createCubeFromJson(l.cubeGroup[o])})))},s=0;s<n.length;s++){var m,u,p,l;i()}}},{key:"createRoomObject",value:function(o,e){this.RoomData[o]={},this.RoomData[o].CurrentRoomName=o,this.RoomData[o].wallGroup={},this.RoomData[o].floorGroup={},this.RoomData[o].cubeGroup={},this.RoomData[o].material=e,this.RoomData[o].parentGroup=new c.m(o+"_parentGroup"),this.RoomData[o].parentGroup.setEnabled(!1)}},{key:"createWallGroup",value:function(o,e){var a={};return a.WallsNode=new c.m(o+"_WallsNode"),a.CornersNode=new c.m(o+"_cornersNode"),a.WallsData={},a.WallsNode.parent=this.RoomData[e].parentGroup,a.CornersNode.parent=this.RoomData[e].parentGroup,a}},{key:"changeRoom",value:function(o,e){g.modePlane&&this.appManager.modeManger.toggleWallMode(),g.modeCube&&this.appManager.modeManger.toggleCubeMode(),console.log(o),console.log(this.RoomData[o].material),g.currentRoomName&&this.RoomData[g.currentRoomName].parentGroup.setEnabled(!1),g.currentRoomName=o,g.currentWallGroupName=null,this.appManager.sphereManager.changeRoomMaterial(this.RoomData[o].material),this.RoomData[g.currentRoomName].parentGroup.setEnabled(!0)}}]),o}(),D=a(141),R=a(74),C=a(191),G=function(){function o(e){Object(m.a)(this,o),this.appManager=void 0,this.handler=void 0,this.scene=void 0,this.camera=void 0,this.floorBoxes=[],this.ceilingBoxes=[],this.floorLines=void 0,this.allWallCorners=[],this.allWallCenterCorners=[],this.mousePointer3dBottom=void 0,this.cursor=void 0,this.createdFloorPoints=!1,this.CreateWallButton=void 0,this.CreateWallButtonDone=void 0,this.EditWallButton=void 0,this.EditWallDoneButton=void 0,this.CreateWallButtonMergeWithFirstPoint=void 0,this.MergeWallsButton=void 0,this.EditFromTopButton=void 0,this.EditFromTopDoneButton=void 0,this.FloorDoneButton=void 0,this.transformMatrix=void 0,this.divPoint=200,this.doOnce=!1,this.grid=void 0,this.appManager=e,this.scene=e.sceneManager.getScene(),this.camera=this.appManager.sceneManager.getCamera(),this.handler=this.appManager.handler.getHandler(),this.cursor=this.appManager.DHCursor.getCursor(),this.CreateWallButton=document.getElementById("CreateWall"),this.CreateWallButtonDone=document.getElementById("CreateWallDone"),this.CreateWallButtonMergeWithFirstPoint=document.getElementById("MergeWithFirstCorner"),this.EditWallButton=document.getElementById("EditWall"),this.EditWallDoneButton=document.getElementById("EditWallDone"),this.MergeWallsButton=document.getElementById("MergeAllWalls"),this.EditFromTopButton=document.getElementById("EditFromTop"),this.EditFromTopDoneButton=document.getElementById("EditFromTopDone"),this.FloorDoneButton=document.getElementById("FloorDone"),this.transformMatrix=this.scene.getTransformMatrix()}return Object(u.a)(o,[{key:"disableAllWallButton",value:function(){null!=this.CreateWallButton&&(this.CreateWallButton.style.display="none"),null!=this.CreateWallButtonDone&&(this.CreateWallButtonDone.style.display="none"),null!=this.CreateWallButtonMergeWithFirstPoint&&(this.CreateWallButtonMergeWithFirstPoint.style.display="none"),null!=this.EditWallButton&&(this.EditWallButton.style.display="none"),null!=this.EditWallDoneButton&&(this.EditWallDoneButton.style.display="none"),null!=this.MergeWallsButton&&(this.MergeWallsButton.style.display="none"),null!=this.EditFromTopButton&&(this.EditFromTopButton.style.display="none"),null!=this.EditFromTopDoneButton&&(this.EditFromTopDoneButton.style.display="none"),null!=this.FloorDoneButton&&(this.FloorDoneButton.style.display="none")}},{key:"enableWallOptionsUi",value:function(){if(this.disableAllWallButton(),g.modePlane){var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup);null!=this.CreateWallButton&&0==o.length&&(this.CreateWallButton.style.display="block"),null!=this.EditWallButton&&o.length>0&&(this.EditWallButton.style.display="block")}g.modePlane_createCorners=!1,g.modePlane_editWallUV=!1,g.modePlane_editFromTop=!1}},{key:"disableAll",value:function(){console.log("disableAll");for(var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup),e=0;e<o.length;e++){var a=o[e];console.log("disableAll ",a),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[a].WallsNode.setEnabled(!1),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[a].CornersNode.setEnabled(!1)}}},{key:"enableAll",value:function(){console.log("enableAll");for(var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup),e=0;e<o.length;e++){var a=o[e];console.log("enableAll ",a),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[a].WallsNode.setEnabled(!0),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[a].CornersNode.setEnabled(!0)}}},{key:"update",value:function(){}},{key:"editSelectedWallDone",value:function(){this.disableAllWallButton();for(var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData),e=0;e<o.length;e++){var a=o[e];this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a].corners.forEach((function(o){o.isVisible=!1})),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a].centers.forEach((function(o){o.isVisible=!1})),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a].wallMesh.isVisible=!0}null!=this.MergeWallsButton&&(this.MergeWallsButton.style.display="block")}},{key:"enableCornerCreation",value:function(){g.modePlane_createCorners=!g.modePlane_createCorners,g.modePlane||(g.modePlane_createCorners=!1,alert("Enable Wall Mode First")),g.modePlane_createCorners&&(this.appManager.DHCursor.updateMsg("Double Click on any corner to start"),this.disableAllWallButton(),null!=this.CreateWallButtonDone&&(this.CreateWallButtonDone.style.display="block"),null!=this.CreateWallButtonMergeWithFirstPoint&&(this.CreateWallButtonMergeWithFirstPoint.style.display="block"))}},{key:"disableCornerCreation",value:function(){g.modePlane_createCorners=!1}},{key:"createWallFinished",value:function(){this.endFloorPointCreation(!1)}},{key:"createWallMergeWithFirstCorner",value:function(){this.endFloorPointCreation(!0)}},{key:"enableWallEdit",value:function(o){var e=this;if(g.modePlane_createCorners=!1,this.disableAllWallButton(),this.appManager.cameraManager.resetCamera(),this.appManager.sphereManager.toggleSphere(!0),g.modePlane_editWallUV=!g.modePlane_editWallUV,g.modePlane||(g.modePlane_editWallUV=!1,alert("Enable Wall Mode First")),console.log(g.modePlane_editWallUV),console.log(g.modePlane),g.modePlane_editWallUV&&this.appManager.DHCursor.updateMsg("Click and hold on wall to edit"),o)g.currentWallGroupName=o;else{var a=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup);a.length>0&&(g.currentWallGroupName=a[0])}for(var r=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData),t=function(o){var a=r[o];e.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a].wallMesh.actionManager=new c.a(e.scene),e.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a].wallMesh.actionManager.registerAction(new c.e(c.a.OnLongPressTrigger,(function(){e.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a].wallMesh.isVisible=!1,Object(C.setTimeout)((function(){e.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a].wallMesh.isVisible=!0}),500),e.selectWall(e.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a].wallMesh)})))},n=0;n<r.length;n++)t(n)}},{key:"disableWallEdit",value:function(){g.modePlane_editWallUV=!1}},{key:"updatePointer",value:function(o){void 0==this.mousePointer3dBottom?this.mousePointer3dBottom=this.handler.createBox(o,"mousePointer3d"):this.mousePointer3dBottom.position.set(o.x,o.y,o.z)}},{key:"disablePointer",value:function(){this.mousePointer3dBottom&&(this.mousePointer3dBottom.isVisible=!1)}},{key:"getWallGeometryInstance",value:function(){return this}},{key:"addFloorPoint",value:function(o){var e=this;if(this.floorBoxes.push(this.handler.createBox(o,"FloorBox_"+this.floorBoxes.length)),1==this.floorBoxes.length){this.floorBoxes[this.floorBoxes.length-1].actionManager=new c.a(this.scene);var a="",r=!1;this.floorBoxes[this.floorBoxes.length-1].actionManager.registerAction(new c.e(c.a.OnPickDownTrigger,(function(){r=!0,console.log(e.floorBoxes[0].actionManager),e.createdFloorPoints||e.endFloorPointCreation(!0),a="Select the options From Below",e.appManager.DHCursor.updateMsg(a)}))),this.floorBoxes[this.floorBoxes.length-1].actionManager.registerAction(new c.e(c.a.OnPointerOverTrigger,(function(){console.log("On pointer over"),g.modePlane_createCorners&&!r&&(a=e.cursor[0].textContent,e.appManager.DHCursor.updateMsg("Click to Merge with First Corner"))}))),this.floorBoxes[this.floorBoxes.length-1].actionManager.registerAction(new c.e(c.a.OnPointerOutTrigger,(function(){console.log("On pointer exit"),g.modePlane_createCorners&&!r&&e.appManager.DHCursor.updateMsg(a)})))}this.updateFloorLines()}},{key:"updateFloorLines",value:function(o){this.floorBoxes.length>0&&(o||(o=[],this.floorBoxes.forEach((function(e){o.push(e.position)}))),this.floorLines&&this.floorLines.dispose(),this.floorLines=this.handler.createLine(o,"FloorLine"),this.floorLines.renderingGroupId=1,this.floorLines.isPickable=!1)}},{key:"endFloorPointCreation",value:function(o){var e=[],a=[],r=[];this.disableCornerCreation(),this.floorBoxes[0].actionManager&&(this.floorBoxes[0].actionManager=null);for(var t=0;t<this.floorBoxes.length;t++){var n=this.floorBoxes[t];n.position.y=this.floorBoxes[0].position.y,this.ceilingBoxes.push(n.clone("CeilingBox_"+this.ceilingBoxes.length)),this.ceilingBoxes[t].position.y+=g.wallYDiffernce,e.push(n.position),t==this.floorBoxes.length-1&&(console.log("last Point Updated"),o&&e.push(this.floorBoxes[0].position),this.updateFloorLines(null)),n.isVisible=!1,this.ceilingBoxes[t].isVisible=!1}this.createdFloorPoints=!0;var i="WallGroup_"+Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup).length+1;g.currentWallGroupName=i,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[i]=this.appManager.roomManager.createWallGroup(i,g.currentRoomName),console.log(this.appManager.roomManager.RoomData);for(var s=0;s<this.floorBoxes.length;s++)if(s!=this.floorBoxes.length-1){(m=[]).push(this.floorBoxes[s].position),m.push(this.ceilingBoxes[s].position),m.push(this.ceilingBoxes[s+1].position),m.push(this.floorBoxes[s+1].position),a.push(this.floorBoxes[s].position),r.push(this.ceilingBoxes[s].position),this.createWall(m,i)}else{var m;if(o)(m=[]).push(this.floorBoxes[s].position),m.push(this.ceilingBoxes[s].position),m.push(this.ceilingBoxes[0].position),m.push(this.floorBoxes[0].position),a.push(this.floorBoxes[s].position),r.push(this.ceilingBoxes[s].position),a.push(this.floorBoxes[0].position),r.push(this.ceilingBoxes[0].position),this.createWall(m,i);for(var u=0;u<this.floorBoxes.length;u++)this.floorBoxes[u].isVisible=!1,this.ceilingBoxes[u].dispose(),this.floorLines.dispose(),this.floorBoxes=[],this.ceilingBoxes=[];this.enableWallOptionsUi()}console.log(a),console.log(r)}},{key:"createWall",value:function(o,e){var a,r,t,n,i,s=this,m=[],u=[];console.log(Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[e].WallsData));var p="Wall_"+Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[e].WallsData).length;console.log(p);for(var l=0;l<u.length;l++)u[l].wallName=p,u[l].roomName=g.currentRoomName,u[l].wallGroupName=e,u[l].isVisible=!1,this.allWallCenterCorners.push(u[l]),u[l].actionManager=new c.a(this.scene),u[l].actionManager.registerAction(new c.e(c.a.OnPointerOverTrigger,(function(){s.appManager.DHCursor.updateMsg("Click to change width of wall")}))),u[l].actionManager.registerAction(new c.e(c.a.OnPointerOutTrigger,(function(){s.appManager.DHCursor.updateMsg("Select points to Edit Wall")}))),u[l].parent=this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[e].CornersNode;for(var b=function(a){m.push(s.mousePointer3dBottom.clone("CornerBox_"+a+"_"+p)),s.allWallCorners.push(m[a]),m[a].position.set(o[a].x,o[a].y,o[a].z),m[a].renderingGroupId=3,m[a].isVisible=!1,m[a].tag="CornerBox",m[a].wallName=p,m[a].roomName=g.currentRoomName,m[a].wallGroupName=e,m[a].actionManager=new c.a(s.scene),m[a].actionManager.registerAction(new c.e(c.a.OnPointerOverTrigger,(function(){g.modePlane_editWallUV?s.appManager.DHCursor.updateMsg("Drag to update Image of wall"):g.modePlane_editFromTop&&s.appManager.DHCursor.updateMsg("Select and Hold to Edit")}))),m[a].actionManager.registerAction(new c.e(c.a.OnPointerOutTrigger,(function(){s.appManager.DHCursor.updateMsg("Select points to Edit Wall")}))),m[a].actionManager.registerAction(new c.e(c.a.OnLongPressTrigger,(function(){g.modePlane_editFromTop&&(s.appManager.DHCursor.updateMsg("Drag Position"),s.appManager.gizmoHandler.attachOnMesh(m[a]),s.appManager.gizmoHandler.enablePositionGizmoOnly(2,0,2),s.disableAllWallButton())}))),m[a].parent=s.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[e].CornersNode},h=0;h<o.length;h++)b(h);var M=[],d={cornersPos:(a=o,Object(R.a)(a),a),corners:(r=m,Object(R.a)(r),r),centers:(t=u,Object(R.a)(t),t),uvPointsPos:(n=o,Object(R.a)(n),n),centersPos:(i=[],Object(R.a)(i),i),wallName:p,roomName:g.currentRoomName,wallGroupName:e,wallMesh:m[0],vertexData:{}};M.push(o[0]),M.push(o[1]);for(var N=this.getPoints(o[2],o[1]),D=this.getPoints(o[3],o[0]),C=0;C<this.divPoint-1;C++)M.push(N[C]),M.push(D[C]);M.push(o[2]),M.push(o[3]);var G=[];M.forEach((function(o){var e=c.o.Project(o,c.f.Identity(),s.scene.getTransformMatrix(),s.camera.viewport.toGlobal(s.appManager.sceneManager.getEngine().getRenderWidth(),s.appManager.sceneManager.getEngine().getRenderHeight())),a=s.getUvPoint(e);null!=a?(G.push(a.x),G.push(a.y)):(console.log(a),G.push(G[G.length-2]),G.push(G[G.length-1]))}));var P=new c.g(p,this.scene);P.renderingGroupId=2;var x=this.getPosition(M),z=!0,w=0,v=[];for(C=0;C<this.divPoint;C++)z?(v.push(w++),v.push(w++),v.push(++w),v.push(w-2),v.push(w-1),v.push(w),z=!z):(v.push(w--),v.push(w),w+=3,v.push(w),v.push(w-3),v.push(w-1),v.push(w));var y=[],f=new c.p;c.p.ComputeNormals(x,v,y),f.positions=x,f.indices=v,f.normals=y,f.uvs=G,f.applyToMesh(P),P.material=this.appManager.roomManager.RoomData[g.currentRoomName].material,d.wallMesh=P,d.vertexData=f,P.wallName=p,P.roomName=g.currentRoomName,P.wallGroupName=e,P.parent=this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[e].WallsNode,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[e].WallsData[p]=d}},{key:"createPlaneFromJson",value:function(o,e,a){var r,t,n,i,s,m=this;console.log("wallData"),console.log(o);var u=[];!this.mousePointer3dBottom&&o.cornersPos&&o.cornersPos.length>0&&(this.mousePointer3dBottom=this.handler.createBox(o.cornersPos[0],"mousePointer3d")),this.disablePointer();var p={cornersPos:(r=[],r),corners:(t=u,Object(R.a)(t),t),centers:(n=[],Object(R.a)(n),n),uvPointsPos:(i=[],i),centersPos:(s=[],Object(R.a)(s),s),wallName:"",roomName:"",wallGroupName:"",wallMesh:this.mousePointer3dBottom,vertexData:null,isVisible:null};if(p.cornersPos=o.cornersPos,p.uvPointsPos=o.uvPointsPos,p.vertexData=o.vertexData,p.isVisible=o.isVisible,p.wallName=o.wallName,p.roomName=e,p.wallGroupName=o.wallGroupName,p.hasOwnProperty("cornersPos")&&p.cornersPos)for(var l=function(o){u.push(m.mousePointer3dBottom.clone("CornerBox_"+o+"_"+p.wallName)),m.allWallCorners.push(u[o]),u[o].position.set(p.cornersPos[o].x,p.cornersPos[o].y,p.cornersPos[o].z),u[o].renderingGroupId=3,u[o].isVisible=!1,u[o].tag="CornerBox",u[o].wallName=p.wallName,u[o].roomName=e,u[o].wallGroupName=a,u[o].actionManager=new c.a(m.scene),u[o].actionManager.registerAction(new c.e(c.a.OnPointerOverTrigger,(function(){g.modePlane_editWallUV?m.appManager.DHCursor.updateMsg("Drag to update Image of wall"):g.modePlane_editFromTop&&m.appManager.DHCursor.updateMsg("Select and Hold to Edit")}))),u[o].actionManager.registerAction(new c.e(c.a.OnPointerOutTrigger,(function(){m.appManager.DHCursor.updateMsg("Select points to Edit Wall")}))),u[o].actionManager.registerAction(new c.e(c.a.OnLongPressTrigger,(function(){g.modePlane_editFromTop&&(m.appManager.DHCursor.updateMsg("Drag Position"),m.appManager.gizmoHandler.attachOnMesh(u[o]),m.appManager.gizmoHandler.enablePositionGizmoOnly(2,0,2),m.disableAllWallButton())}))),u[o].parent=m.appManager.roomManager.RoomData[e].wallGroup[a].CornersNode},b=0;b<p.cornersPos.length;b++)l(b);p.corners=u,p.uvPointsPos=o.uvPointsPos;var h=new c.g(p.wallName,this.scene);h.renderingGroupId=2;var M=[],d=[],N=[],D=[];p.hasOwnProperty("vertexData")&&p.vertexData&&(Object.keys(o.vertexData.positions).forEach((function(e){M.push(o.vertexData.positions[e])})),N=o.vertexData.indices,D=o.vertexData.uvs);var C=new c.p;c.p.ComputeNormals(M,N,d),C.positions=M,C.indices=N,C.normals=d,C.uvs=D,C.applyToMesh(h),h.material=this.appManager.roomManager.RoomData[e].material,console.log(h),console.log(p),console.log(C),p.wallMesh=h,p.vertexData=C,h.wallName=p.wallName,h.roomName=e,h.wallGroupName=a,h.parent=this.appManager.roomManager.RoomData[e].wallGroup[a].WallsNode,this.appManager.roomManager.RoomData[e].wallGroup[a].WallsData[p.wallName]=p,console.log(this.appManager.roomManager.RoomData[e].parentGroup)}},{key:"getPoints",value:function(o,e){for(var a=this.minus(o,e),r=[],t=1;t<this.divPoint;t++){var n=new c.o(0,0,0);n.x=e.x+a.x*t/this.divPoint,n.y=e.y+a.y*t/this.divPoint,n.z=e.z+a.z*t/this.divPoint,r.push(n)}return r}},{key:"minus",value:function(o,e){return new c.o(o.x-e.x,o.y-e.y,o.z-e.z)}},{key:"getUvPoint",value:function(o){var e=this;return this.scene.pick(o.x,o.y,(function(o){return o===e.appManager.sphereManager.getSphere()})).getTextureCoordinates()}},{key:"getPosition",value:function(o,e){for(var a=Object(D.a)(o),r=new Float32Array(3*o.length),t=new Float32Array(2*o.length),n=1;n<=o.length;n++)r[3*n-3]=a[n-1].x,r[3*n-2]=a[n-1].y,r[3*n-1]=a[n-1].z,e&&(t[3*n-3]=a[n-1].x,t[3*n-2]=a[n-1].z,console.log(a[n-1]));var i=[];if(e)for(var s=0;s<t.length;s++){var m=parseInt(t[s]);i.push(m)}return e?[r,i]:r}},{key:"updateWall",value:function(o,e,a){var r=this;if(console.log(o),console.log(e),console.log(a),"wall"===a)var t=this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName];else if("floor"===a)t=this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName];var n=[];n.push(t.corners[0].position),n.push(t.corners[1].position);for(var i=this.getPoints(t.corners[2].position,t.corners[1].position),s=this.getPoints(t.corners[3].position,t.corners[0].position),m=0;m<this.divPoint-1;m++)n.push(i[m]),n.push(s[m]);if(n.push(t.corners[2].position),n.push(t.corners[3].position),e){var u=[];n.forEach((function(o){var e=c.o.Project(o,c.f.Identity(),r.scene.getTransformMatrix(),r.camera.viewport.toGlobal(r.appManager.sceneManager.getEngine().getRenderWidth(),r.appManager.sceneManager.getEngine().getRenderHeight())),a=r.getUvPoint(e);null!=a?(u.push(a.x),u.push(a.y)):(console.log(a),u.push(u[u.length-2]),u.push(u[u.length-1]))})),"wall"==a?(this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos=[],this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos.push(t.corners[0].position),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos.push(t.corners[1].position),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos.push(t.corners[2].position),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos.push(t.corners[3].position)):"floor"==a&&(this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos=[],this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos.push(t.corners[0].position),this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos.push(t.corners[1].position),this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos.push(t.corners[2].position),this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].uvPointsPos.push(t.corners[3].position))}if("wall"==a){this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].cornersPos=[],this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].cornersPos.push(t.corners[0].position),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].cornersPos.push(t.corners[1].position),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].cornersPos.push(t.corners[2].position),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].cornersPos.push(t.corners[3].position);var p=this.getPosition(n);this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].vertexData.positions=p,e&&(this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].vertexData.uvs=u),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].vertexData.applyToMesh(this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].wallMesh)}else if("floor"==a){this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].cornersPos=[],this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].cornersPos.push(t.corners[0].position),this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].cornersPos.push(t.corners[1].position),this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].cornersPos.push(t.corners[2].position),this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].cornersPos.push(t.corners[3].position);p=this.getPosition(n);this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].vertexData.positions=p,e&&(this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].vertexData.uvs=u),this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].vertexData.applyToMesh(this.appManager.roomManager.RoomData[o.roomName].floorGroup[o.wallGroupName].WallsData[o.wallName].wallMesh)}}},{key:"selectWall",value:function(o){this.disableAllWallButton();for(var e=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData),a=0;a<e.length;a++){var r=e[a];this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[r].corners.forEach((function(o){o.isVisible=!1})),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[r].centers.forEach((function(o){o.isVisible=!1})),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[r].wallMesh.isVisible=!1}null!=this.EditWallDoneButton&&(this.EditWallDoneButton.style.display="block"),console.log(o),console.log(this.appManager.roomManager.RoomData),console.log(this.appManager.roomManager.RoomData[o.roomName]),console.log(this.appManager.roomManager.RoomData[o.roomName].wallGroup),console.log(this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName]),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].corners.forEach((function(o){o.isVisible=!0})),this.appManager.roomManager.RoomData[o.roomName].wallGroup[o.wallGroupName].WallsData[o.wallName].centers.forEach((function(o){o.isVisible=!0}))}},{key:"getCenterPoint",value:function(o,e,a,r){var t=this.minus(o,e),n=new c.o(0,0,0);n.x=e.x+t.x/2,n.y=e.y+t.y/2,n.z=e.z+t.z/2;var i=this.mousePointer3dBottom.clone(a);return i.name=a,i.tag=r,i.position.set(n.x,n.y,n.z),i.renderingGroupId=3,i.isVisible=!1,[i,n]}},{key:"updateAllWallUv",value:function(){var o=this;try{var e=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup),a=!1;e.length>0&&e[0]==g.currentWallGroupName&&(a=!0);for(var r=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData),t=function(e){var t=r[e];o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].wallMesh.actionManager.actions.forEach((function(e){o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].wallMesh.actionManager.unregisterAction(e)})),0===e&&(a&&o.calculateHeight(o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[1].position,o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[0].position),o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[3].position.y=o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[0].position.y,o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[2].position.y=o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[1].position.y),o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[0].position.y=o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[0]].corners[0].position.y,o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[1].position.y=o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[0]].corners[1].position.y,o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[2].position.y=o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[0]].corners[2].position.y,o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[3].position.y=o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[0]].corners[3].position.y,0!==e&&(o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[0].position.set(o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[e-1]].corners[3].position.x,o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[e-1]].corners[3].position.y,o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[e-1]].corners[3].position.z),o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[1].position.set(o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[e-1]].corners[2].position.x,o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[e-1]].corners[2].position.y,o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[r[e-1]].corners[2].position.z)),o.updateWall(o.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[t].corners[0],!1,"wall"),e===r.length-1&&(o.enableWallOptionsUi(),null!=o.EditFromTopButton&&(o.EditFromTopButton.style.display="block"))},n=0;n<r.length;n++)t(n)}catch(i){console.log(i)}}},{key:"AdjustWallFromTop",value:function(){this.disableAllWallButton(),this.appManager.cameraManager.setVerticalCamera(),this.appManager.sphereManager.toggleSphere(!1),g.updatefov=!1,g.modePlane_editFromTop=!0;var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData);this.grid||(this.grid=this.handler.createGrid(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[o[0]].corners[0].position.y)),this.grid&&(this.grid.isVisible=!0);for(var e=0;e<o.length;e++)this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[o[e]].corners[0].isVisible=!0;null!=this.EditFromTopDoneButton&&(this.EditFromTopDoneButton.style.display="block")}},{key:"updatePointWallFromTop",value:function(o){var e=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData);console.log(o);for(var a=0;a<e.length;a++)if(console.log("4"),o.wallName===e[a]){console.log("5"),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a]].corners[1].position.x=this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a]].corners[0].position.x,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a]].corners[1].position.z=this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a]].corners[0].position.z,0===a?(console.log("F UPDATE WALL",a,"  ",e.length-1),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[e.length-1]].corners[2].position=this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a]].corners[1].position,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[e.length-1]].corners[3].position=this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a]].corners[0].position):(console.log("O UPDATE WALL",a,"  ",a-1,"  ",e[a-1]),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a-1]].corners[2].position=this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a]].corners[1].position,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a-1]].corners[3].position=this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a]].corners[0].position),this.updateWall(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a]].corners[0],!1,"wall"),0==a?this.updateWall(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[e.length-1]].corners[0],!1,"wall"):this.updateWall(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[a-1]].corners[0],!1,"wall");break}}},{key:"AdjustWallFromTopDone",value:function(){this.disableAllWallButton(),this.appManager.cameraManager.resetCamera(),this.appManager.sphereManager.toggleSphere(!0),g.updatefov=!0,g.modePlane_editFromTop=!1,this.enableWallOptionsUi(),null!=this.EditFromTopButton&&(this.EditFromTopButton.style.display="block"),this.grid&&(this.grid.isVisible=!1);for(var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData),e=0;e<o.length;e++)this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[o[e]].corners[0].isVisible=!1}},{key:"createFloorFromEarcut",value:function(){var o="Floor_"+g.currentWallGroupName;console.log(o),this.appManager.roomManager.RoomData[g.currentRoomName].floorGroup[o]=this.appManager.roomManager.createWallGroup(o,g.currentRoomName);for(var e=[],a=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData),r=[],t=[],n=0;n<a.length;n++)console.log(a[n]),e.push(this.mousePointer3dBottom.clone("floorPoints_"+n)),e[n].isVisible=!0,e[n].position.set(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0].x,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0].y,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0].z),t.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0]),r.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].vertexData.uvs[0]),r.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].vertexData.uvs[1]);console.log(e);var i={name:o,floorMesh:this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[0]].corners[0],vertexData:{}};console.log(r);var s=new c.g(o,this.scene);s.renderingGroupId=2;var m,u=this.getPosition(t),p=this.getPosition(t,!0);console.log(t),m=VP.earcut_(u,p,2);var l=new c.p;c.p.ComputeNormals(u,m,[]),l.positions=u,l.indices=m,l.uvs=r,l.applyToMesh(s),s.material=this.appManager.roomManager.RoomData[g.currentRoomName].material,console.log(s),console.log(i),console.log(l),i.vertexData=l,s.parent=this.appManager.roomManager.RoomData[g.currentRoomName].floorGroup[o].WallsNode,this.doOnce=!0}},{key:"createFloorFromEarcut2",value:function(){var o="Floor_"+g.currentWallGroupName;console.log(o),this.appManager.roomManager.RoomData[g.currentRoomName].floorGroup[o]=this.appManager.roomManager.createWallGroup(o,g.currentRoomName);for(var e=[],a=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData),r=[],t=[],n=0;n<a.length;n++){console.log(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]]),e.push(this.mousePointer3dBottom.clone("floorPoints_"+n)),e[n].isVisible=!0,e[n].position.set(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0].x,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0].y,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0].z);var i=new c.n(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0].x,this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0].z);t.push(i),r.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[n]].uvPointsPos[0])}console.log(e);this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[a[0]].corners[0],new c.j("polytri2",t).build()}},{key:"createFloorFromPoints",value:function(){null!=this.FloorDoneButton&&(this.FloorDoneButton.style.display="block");var o="Floor_"+g.currentWallGroupName;console.log(o),this.appManager.roomManager.RoomData[g.currentRoomName].floorGroup[o]=this.appManager.roomManager.createWallGroup(o,g.currentRoomName);for(var e=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData),a=[],r=[],t=[],n=0;n<e.length;n++)console.log(e[n]),n<4&&(console.log(n),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].wallMesh.isVisible=!1,a.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].uvPointsPos[0]),r.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].cornersPos[0]),t.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].vertexData.uvs[0]),t.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].vertexData.uvs[1]),3==n&&this.createFloorWall(r,a,t,o))}},{key:"createFloorWall",value:function(o,e,a,r){var t,n,i,s,m,u=this;console.log("cornerPos ",o),console.log("UVfloorPoints ",e),console.log("_uvs ",a),console.log("wallGroupName ",r);for(var p=[],l=r+"1",b=0;b<o.length;b++)p.push(this.mousePointer3dBottom.clone("CornerBox_"+b+"_"+l)),this.allWallCorners.push(p[b]),p[b].position.set(o[b].x,o[b].y,o[b].z),p[b].renderingGroupId=3,p[b].isVisible=!0,p[b].tag="CornerBox",p[b].wallName=l,p[b].roomName=g.currentRoomName,p[b].wallGroupName=r,p[b].actionManager=new c.a(this.scene),p[b].actionManager.registerAction(new c.e(c.a.OnPointerOverTrigger,(function(){u.appManager.DHCursor.updateMsg("Drag to update Image of wall"),u.appManager.DHCursor.updateMsg("Select and Hold to Edit")}))),p[b].actionManager.registerAction(new c.e(c.a.OnPointerOutTrigger,(function(){u.appManager.DHCursor.updateMsg("Select points to Edit Wall")}))),p[b].actionManager.registerAction(new c.e(c.a.OnLongPressTrigger,(function(){}))),p[b].parent=this.appManager.roomManager.RoomData[g.currentRoomName].floorGroup[r].CornersNode;var h=[],M={cornersPos:(t=o,Object(R.a)(t),t),corners:(n=p,Object(R.a)(n),n),centers:(i=[],Object(R.a)(i),i),uvPointsPos:(s=o,Object(R.a)(s),s),centersPos:(m=[],Object(R.a)(m),m),name:l,wallMesh:p[0],vertexData:{}};h.push(o[0]),h.push(o[1]);for(var d=this.getPoints(o[2],o[1]),N=this.getPoints(o[3],o[0]),D=0;D<this.divPoint-1;D++)h.push(d[D]),h.push(N[D]);h.push(o[2]),h.push(o[3]);a=[];e.forEach((function(o){var e=c.o.Project(o,c.f.Identity(),u.scene.getTransformMatrix(),u.camera.viewport.toGlobal(u.appManager.sceneManager.getEngine().getRenderWidth(),u.appManager.sceneManager.getEngine().getRenderHeight())),r=u.getUvPoint(e);null!=r?(a.push(r.x),a.push(r.y)):(console.log(r),a.push(a[a.length-2]),a.push(a[a.length-1]))}));var C=new c.g(l,this.scene);C.renderingGroupId=2;var G=this.getPosition(h),P=!0,x=0,z=[];for(D=0;D<this.divPoint;D++)P?(z.push(x++),z.push(x++),z.push(++x),z.push(x-2),z.push(x-1),z.push(x),P=!P):(z.push(x--),z.push(x),x+=3,z.push(x),z.push(x-3),z.push(x-1),z.push(x));var w=new c.p;c.p.ComputeNormals(G,z,[]),w.positions=G,w.indices=z,w.uvs=a,w.applyToMesh(C),C.material=this.appManager.roomManager.RoomData[g.currentRoomName].material,console.log(C),console.log(M),console.log(w),M.wallMesh=C,M.wallMesh.name=l,M.wallMesh.roomName=g.currentRoomName,M.wallMesh.wallGroupName=r,M.vertexData=w,C.parent=this.appManager.roomManager.RoomData[g.currentRoomName].floorGroup[r].WallData,this.appManager.roomManager.RoomData[g.currentRoomName].floorGroup[r].WallsData[l]=M}},{key:"createFloorPlane",value:function(){var o="Floor_"+g.currentWallGroupName;console.log(o),this.appManager.roomManager.RoomData[g.currentRoomName].floorGroup[o]=this.appManager.roomManager.createWallGroup(o,g.currentRoomName);for(var e=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData),a=[],r=[],t=[],n=0;n<e.length;n++)console.log(e[n]),n<4&&(console.log(n),this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].wallMesh.isVisible=!1,a.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].uvPointsPos[0]),r.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].cornersPos[0]),t.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].vertexData.uvs[0]),t.push(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[e[n]].vertexData.uvs[1]),3==n&&this.createFloorWall(r,a,t,o))}},{key:"FloorDone",value:function(){this.disableAllWallButton(),g.modePlane=!1,g.modePlane_createCorners=!1,g.modePlane_editFromTop=!1,g.modePlane_editWallUV=!1,g.modePlane_editFloorUV=!1}},{key:"getPosition2",value:function(o,e){for(var a=Object(D.a)(o),r=new Float32Array(3*o.length),t=new Float32Array(2*o.length),n=1;n<=o.length;n++)r[3*n-3]=a[n-1].x,r[3*n-2]=a[n-1].y,r[3*n-1]=a[n-1].z,e&&(t[3*n-3]=a[n-1].x,t[3*n-2]=a[n-1].z);for(var i=[],s=1;s<=t.length;s++)i.push(parseFloat(parseFloat(t[s]).toFixed(2)));return e?[r,i]:r}},{key:"enableEditRoom",value:function(){this.disableAllWallButton(),this.appManager.cameraManager.setVerticalCamera(),this.appManager.sphereManager.toggleSphere(!1),g.updatefov=!1,g.modePlane_editFromTop=!0;var o=Object.keys(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData);this.grid||(this.grid=this.handler.createGrid(this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[o[0]].corners[0].position.y)),this.grid&&(this.grid.isVisible=!0);for(var e=0;e<o.length;e++)this.appManager.roomManager.RoomData[g.currentRoomName].wallGroup[g.currentWallGroupName].WallsData[o[e]].corners[0].isVisible=!0}},{key:"calculateHeight",value:function(o,e){g.wallHeight=c.o.Distance(o,e),g.bottomY=e.y,g.topY=o.y}}]),o}(),P=a(0),x=function(){function o(e){Object(m.a)(this,o),this.appManager=void 0,this.camera=void 0,this.appManager=e,this.camera=this.appManager.sceneManager.getCamera(),this.resetCamera()}return Object(u.a)(o,[{key:"addCameraListener",value:function(){}},{key:"setVerticalCamera",value:function(){this.camera.lowerBetaLimit=this.camera.upperBetaLimit=this.camera.beta=.01,this.camera.panningSensibility=100,this.camera.upperRadiusLimit=2e4,this.camera.maxZ=3e4,this.camera.wheelDeltaPercentage=.1}},{key:"resetCamera",value:function(){this.camera.setTarget(P.e.Zero()),this.camera.setPosition(new P.e(0,0,.1)),this.camera.minZ=0,this.camera.panningSensibility=0,this.camera.upperRadiusLimit=2e4,this.camera.maxZ=3e4,this.camera.lowerRadiusLimit=-100,this.camera.lowerBetaLimit=.01,this.camera.upperBetaLimit=3.13,this.camera.fov=.8,this.camera.panningSensibility=0,this.camera.inertia=.7,this.camera.lowerRadiusLimit=this.camera.upperRadiusLimit=this.camera.radius=1,this.camera.lowerBetaLimit=this.camera.upperBetaLimit=this.camera.beta=1.56,g.updatefov=!0}},{key:"freeCamera",value:function(){g.updatefov=!1,this.camera.upperRadiusLimit=2e4,this.camera.maxZ=3e4,this.camera.lowerRadiusLimit=-100,this.camera.lowerBetaLimit=.01,this.camera.upperBetaLimit=3.13,this.camera.fov=.8,this.camera.panningSensibility=100}},{key:"dollhouseCamera",value:function(){g.updatefov=!1,this.camera.lowerRadiusLimit=-100,this.camera.fov=.8,this.camera.panningSensibility=100,this.camera.lowerBetaLimit=.01,this.camera.upperBetaLimit=3.13,this.camera.panningSensibility=100,this.camera.upperRadiusLimit=2e4,this.camera.maxZ=3e4,this.camera.wheelDeltaPercentage=.1}}]),o}(),z=function(){function o(e){Object(m.a)(this,o),this.cursor=void 0,this.cursor=document.getElementsByClassName("cursorBox")}return Object(u.a)(o,[{key:"getCursor",value:function(){return this.cursor}},{key:"updateMsg",value:function(o){this.cursor[0].textContent=o}}]),o}(),w=a(195),v=function(){function o(e){var a=this;Object(m.a)(this,o),this.appManager=void 0,this.camera=void 0,this.scene=void 0,this.sphere=void 0,this.handler=void 0,this.wallGeometry=void 0,this.cursor=void 0,this.slectedObj=void 0,this.appManager=e,this.camera=this.appManager.sceneManager.getCamera(),this.scene=this.appManager.sceneManager.getScene(),this.sphere=this.appManager.sphereManager.getSphere(),console.log(this.appManager.handler),this.handler=this.appManager.handler.getHandler(),this.wallGeometry=this.appManager.wallGeometry.getWallGeometryInstance(),this.appManager.sceneManager.getCanvas().addEventListener("dblclick",(function(){return a.onDoubleClick()})),this.appManager.sceneManager.getCanvas().addEventListener("wheel",(function(o){return a.onDocumentMouseWheel(o)})),document.addEventListener("keydown",(function(o){return a.onKeyDown(o)})),this.mouseControls(),this.cursor=this.appManager.DHCursor.getCursor()}return Object(u.a)(o,[{key:"onKeyDown",value:function(o){"2"==o.key&&this.appManager.cameraManager.freeCamera(),"1"==o.key&&this.appManager.cameraManager.resetCamera(),"3"==o.key&&this.appManager.cameraManager.setVerticalCamera(),"4"==o.key&&this.appManager.cameraManager.dollhouseCamera(),"s"==o.key&&this.appManager.sphereManager.toggleSphere(),"c"==o.key&&(console.log(this.appManager),console.log("DH_Constants.modePlane :",g.modePlane),console.log("DH_Constants.modePlane_createCorners :",g.modePlane_createCorners),console.log("DH_Constants.modePlane_editFloorUV :",g.modePlane_editFloorUV),console.log("DH_Constants.modePlane_editFromTop :",g.modePlane_editFromTop),console.log("DH_Constants.modePlane_editWallUV :",g.modePlane_editWallUV),console.log("DH_Constants.modeCube :",g.modeCube),console.log("DH_Constants.modeCube_CreateNewCube :",g.modeCube_CreateNewCube),console.log("DH_Constants.modeCube_updatingCubeCenter :",g.modeCube_updatingCubeCenter),console.log("DH_Constants.modeCube_edit_Cube :",g.modeCube_edit_Cube),console.log("DH_Constants.modeCube_edit_CubeWallUVPosition :",g.modeCube_edit_CubeWallUVPosition),console.log(g.currentRoomName),console.log(g.currentWallGroupName),this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo&&(this.appManager.gizmoHandler.gizmoManager.gizmos.positionGizmo.yGizmo._scaleRatio=0,alert(">>"))),console.log(o.key),"e"==o.key&&this.wallGeometry.createFloorFromEarcut(),"f"==o.key&&this.appManager.jsonManager.exportTojson()}},{key:"mouseControls",value:function(){var o=this;this.scene.onPointerDown=function(e,a){a.hit&&(o.slectedObj=a.pickedMesh)},this.scene.onPointerMove=function(e,a){o.cursor&&o.moveCursor(e);var r=o.scene.pick(o.scene.pointerX,o.scene.pointerY,(function(e){return e===o.sphere}));r.hit&&(o.wallGeometry&&g.modePlane?(g.modePlane_createCorners?o.wallGeometry.updatePointer(r.pickedPoint):o.wallGeometry.disablePointer(),g.modePlane_editWallUV&&o.slectedObj&&o.slectedObj.hasOwnProperty("tag")&&"CornerBox"==o.slectedObj.tag?(o.slectedObj.position=r.pickedPoint,o.wallGeometry.updateWall(o.slectedObj,!0,"wall")):g.modePlane_editFloorUV&&o.slectedObj&&o.slectedObj.hasOwnProperty("tag")&&"CornerBox"==o.slectedObj.tag&&(o.slectedObj.position=r.pickedPoint,o.wallGeometry.updateWall(o.slectedObj,!0,"floor"))):o.wallGeometry.disablePointer())},this.scene.onPointerUp=function(e,a){o.slectedObj&&(console.log(o.wallGeometry),console.log(g.modePlane),console.log(g.modePlane_editWallUV),console.log(o.slectedObj),o.wallGeometry&&g.modePlane&&g.modePlane_editWallUV&&o.slectedObj&&o.slectedObj.hasOwnProperty("tag")&&o.slectedObj.tag,o.slectedObj=null)}}},{key:"onDoubleClick",value:function(){var o=this.scene.pick(this.scene.pointerX,this.scene.pointerY,(function(o){return o}));null!=o.pickedMesh&&o&&o.hit&&(console.log(o.pickedMesh),console.log("DH_Constants.modePlane ",g.modePlane),console.log("DH_Constants.modePlane_createCorners ",g.modePlane_createCorners),g.modePlane&&g.modePlane_createCorners?this.wallGeometry.addFloorPoint(o.pickedPoint):g.modeCube&&g.modeCube_CreateNewCube&&this.appManager.cubeGeometry.createCube(o.pickedPoint)),o.pickedMesh}},{key:"onDocumentMouseWheel",value:function(o){if(g.updatefov){this.camera.fov-=o.wheelDeltaY/2*.005,this.camera.fov=Math.max(Math.min(this.camera.fov,2.8),.5)}else this.camera.fov=.8}},{key:"moveCursor",value:function(o){w.a.to(this.cursor[0],.3,{left:o.clientX,top:o.clientY})}}]),o}(),y=a(169),f=function(){function o(e){var a,r,t,n,i,s,u,p,l,c=this;Object(m.a)(this,o),this.appManager=void 0,this.scene=void 0,this.gizmoManager=void 0,this.mesh=void 0,this.appManager=e,this.scene=e.sceneManager.getScene(),this.gizmoManager=new y.a(this.scene),this.gizmoManager.positionGizmoEnabled=!0,this.gizmoManager.rotationGizmoEnabled=!0,this.gizmoManager.scaleGizmoEnabled=!0,this.gizmoManager.usePointerToAttachGizmos=!1,this.gizmoManager.gizmos.positionGizmo.xGizmo.dragBehavior.onDragObservable.add((function(o){c.onMeshDraging(o,"x")})),this.gizmoManager.gizmos.positionGizmo.yGizmo.dragBehavior.onDragObservable.add((function(o){c.onMeshDraging(o,"y")})),this.gizmoManager.gizmos.positionGizmo.zGizmo.dragBehavior.onDragObservable.add((function(o){c.onMeshDraging(o,"z")})),null===(a=this.gizmoManager.gizmos.positionGizmo)||void 0===a||a.xGizmo.dragBehavior.onDragEndObservable.add((function(o){console.log("Position gizmo's x axis drag was ended",o),c.onMeshTransformUpdate("position")})),null===(r=this.gizmoManager.gizmos.positionGizmo)||void 0===r||r.yGizmo.dragBehavior.onDragEndObservable.add((function(o){c.onMeshTransformUpdate("position")})),null===(t=this.gizmoManager.gizmos.positionGizmo)||void 0===t||t.zGizmo.dragBehavior.onDragEndObservable.add((function(o){c.onMeshTransformUpdate("position")})),null===(n=this.gizmoManager.gizmos.rotationGizmo)||void 0===n||n.xGizmo.dragBehavior.onDragEndObservable.add((function(o){console.log("Position gizmo's x axis drag was ended",o),c.onMeshTransformUpdate("rotation")})),null===(i=this.gizmoManager.gizmos.rotationGizmo)||void 0===i||i.yGizmo.dragBehavior.onDragEndObservable.add((function(o){c.onMeshTransformUpdate("rotation")})),null===(s=this.gizmoManager.gizmos.rotationGizmo)||void 0===s||s.zGizmo.dragBehavior.onDragEndObservable.add((function(o){c.onMeshTransformUpdate("rotation")})),null===(u=this.gizmoManager.gizmos.scaleGizmo)||void 0===u||u.xGizmo.dragBehavior.onDragEndObservable.add((function(o){console.log("Position gizmo's x axis drag was ended",o),c.onMeshTransformUpdate("scale")})),null===(p=this.gizmoManager.gizmos.scaleGizmo)||void 0===p||p.yGizmo.dragBehavior.onDragEndObservable.add((function(o){c.onMeshTransformUpdate("scale")})),null===(l=this.gizmoManager.gizmos.scaleGizmo)||void 0===l||l.zGizmo.dragBehavior.onDragEndObservable.add((function(o){c.onMeshTransformUpdate("scale")}))}return Object(u.a)(o,[{key:"attachOnMesh",value:function(o){this.gizmoManager.positionGizmoEnabled=!0,this.mesh=o,this.gizmoManager.attachToMesh(o),console.log(this.gizmoManager)}},{key:"attachOnNode",value:function(o){this.gizmoManager.attachToNode(o)}},{key:"onMeshTransformUpdate",value:function(o){console.log(this.mesh.tag),null!=this.mesh&&(console.log("2"),g.modePlane&&g.modePlane_editFromTop?(console.log("3"),this.appManager.wallGeometry.updatePointWallFromTop(this.mesh)):g.modeCube&&g.modeCube_edit_Cube?(console.log("3"),this.appManager.cubeGeometry.updateCube(this.mesh)):g.modeCube_editRoom&&g.modePlane_editFromTop&&"CornerBox"==this.mesh.tag?(console.log("3"),this.appManager.wallGeometry.updatePointWallFromTop(this.mesh)):g.modeCube_editRoom&&g.modeCube_edit_Cube&&"cubeCornerBox"==this.mesh.tag&&(console.log("3"),this.appManager.cubeGeometry.updateCube(this.mesh)))}},{key:"onMeshDraging",value:function(o,e){null!=this.mesh&&(g.modePlane&&g.modePlane_editFromTop||(g.modeCube&&g.modeCube_edit_Cube?this.appManager.cubeGeometry.ondragCubePoints(this.mesh,o,e):g.modeCube_editRoom&&g.modeCube_edit_Cube&&"cubeCornerBox"==this.mesh.tag&&(console.log("3"),this.appManager.cubeGeometry.ondragCubePoints(this.mesh,o,e))))}},{key:"enablePositionGizmoOnly",value:function(o,e,a){this.gizmoManager.positionGizmoEnabled=!0,this.gizmoManager.rotationGizmoEnabled=!1,this.gizmoManager.scaleGizmoEnabled=!1,this.gizmoManager.gizmos.positionGizmo&&(this.gizmoManager.gizmos.positionGizmo.xGizmo._scaleRatio=o,this.gizmoManager.gizmos.positionGizmo.yGizmo._scaleRatio=e,this.gizmoManager.gizmos.positionGizmo.zGizmo._scaleRatio=a),this.gizmoManager.positionGizmoEnabled=!0,this.gizmoManager.rotationGizmoEnabled=!1,this.gizmoManager.scaleGizmoEnabled=!1}},{key:"getGizmoHandler",value:function(){return this}},{key:"updateCubeGizmo",value:function(o,e){if(this.gizmoManager.gizmos&&this.gizmoManager.gizmos.positionGizmo){var a=o.x-e.x,r=o.y-e.y,t=o.z-e.z;a<0&&(a=-a),r<0&&(r=-r),t<0&&(t=-t);var n=!1;return a>=r&&a>=t?(this.gizmoManager.gizmos.positionGizmo.xGizmo.scaleRatio=1,this.gizmoManager.gizmos.positionGizmo.yGizmo.scaleRatio=0,this.gizmoManager.gizmos.positionGizmo.zGizmo.scaleRatio=0,o.x>e.x&&(n=!0)):r>=a&&r>=t?(this.gizmoManager.gizmos.positionGizmo.xGizmo.scaleRatio=0,this.gizmoManager.gizmos.positionGizmo.yGizmo.scaleRatio=1,this.gizmoManager.gizmos.positionGizmo.zGizmo.scaleRatio=0,o.y>e.y&&(n=!0)):(this.gizmoManager.gizmos.positionGizmo.xGizmo.scaleRatio=0,this.gizmoManager.gizmos.positionGizmo.yGizmo.scaleRatio=0,this.gizmoManager.gizmos.positionGizmo.zGizmo.scaleRatio=1,o.z>e.z&&(n=!0)),n}}}]),o}(),B=a(192),W=a(194),k=function(){function o(e){Object(m.a)(this,o),this.appManager=void 0,this.scene=void 0,this.mosusePointer=void 0,this.appManager=e,this.scene=this.appManager.sceneManager.getScene()}return Object(u.a)(o,[{key:"enableMousePointer",value:function(o){if(void 0==this.mosusePointer){var e=new c.k("myMaterialgreen",this.scene);e.diffuseColor=new c.c(0,1,.25);var a=new c.k("myMaterial360",this.scene);a.diffuseColor=new c.c(0,1,1),this.mosusePointer=c.h.CreateBox("refmousePointer",{size:80},this.scene);var r=c.h.CreateBox("refmousePointerLine",{width:10,height:5e3},this.scene);r.isPickable=!1,r.parent=this.mosusePointer,this.mosusePointer.material=e,r.material=a,this.mosusePointer.renderingGroupId=1,this.mosusePointer.isPickable=!1}this.mosusePointer.isVisible(o)}},{key:"createBox",value:function(o,e,a){console.log(a);var r=g.size_ControlBox;a&&a.hasOwnProperty("size")&&(r=a.size);var t=c.h.CreateBox(e,{size:r},this.scene);return t.position.set(o.x,o.y,o.z),t}},{key:"createLine",value:function(o,e){return c.h.CreateLines(e,{points:o},this.scene)}},{key:"createLineTube",value:function(o,e,a){return c.h.CreateTube("tube",{path:o,radius:a},this.scene)}},{key:"getHandler",value:function(){return this}},{key:"createGrid",value:function(o){var e=new W.a("grid",this.scene);e.majorUnitFrequency=10,e.minorUnitVisibility=.3,e.gridRatio=10,e.backFaceCulling=!1,e.mainColor=new c.c(1,1,1),e.lineColor=new c.c(1,1,1),e.opacity=.8,e.zOffset=1;var a=B.Mesh.CreateGround("grid",1e5,1e5,2,this.scene);return a.position.set(0,0,0),a.material=e,a.isPickable=!1,a.renderingGroupId=1,a.position.y=o,a}},{key:"getPoints",value:function(o,e){for(var a=this.minus(o,e),r=[],t=1;t<g.divPoint;t++){var n=new c.o(0,0,0);n.x=e.x+a.x*t/g.divPoint,n.y=e.y+a.y*t/g.divPoint,n.z=e.z+a.z*t/g.divPoint,r.push(n)}return r}},{key:"minus",value:function(o,e){return new c.o(o.x-e.x,o.y-e.y,o.z-e.z)}},{key:"getUvPoint",value:function(o){var e=this;return this.scene.pick(o.x,o.y,(function(o){return o===e.appManager.sphereManager.getSphere()})).getTextureCoordinates()}},{key:"getPosition",value:function(o,e){for(var a=Object(D.a)(o),r=new Float32Array(3*o.length),t=new Float32Array(2*o.length),n=1;n<=o.length;n++)r[3*n-3]=a[n-1].x,r[3*n-2]=a[n-1].y,r[3*n-1]=a[n-1].z,e&&(t[3*n-3]=a[n-1].x,t[3*n-2]=a[n-1].z,console.log(a[n-1]));var i=[];if(e)for(var s=0;s<t.length;s++){var m=parseFloat(t[s]);m=parseFloat(m.toFixed(2)),i.push(m)}return e?[r,i]:r}}]),o}(),O=a(9),_=function(){function o(e){Object(m.a)(this,o),this.scene=void 0,this.scene=e}return Object(u.a)(o,[{key:"getMaterial",value:function(o){var e=new c.i("Pbr_"+o,this.scene);return e.metallic=0,e.roughness=1,console.log(o),e._albedoTexture=new O.a(o,this.scene,void 0,void 0,void 0,(function(){console.log("Load")}),(function(o,e){console.log("err"),console.log(o),console.log(e)})),e.backFaceCulling=!1,e}}]),o}(),j=function(){function o(e){Object(m.a)(this,o),this.appManager=void 0,this.appManager=e}return Object(u.a)(o,[{key:"toggleWallMode",value:function(){g.modeCube&&(this.toggleCubeMode(),this.appManager.cubeGeometry.disableAllCube()),g.modePlane=!g.modePlane,console.log("Wall Mode :",g.modePlane),!g.modePlane||g.modePlane_createCorners||g.modePlane_editWallUV||this.appManager.DHCursor.updateMsg("Select Options from below"),this.appManager.wallGeometry.enableWallOptionsUi(),g.modePlane?this.appManager.wallGeometry.enableAll():this.appManager.wallGeometry.disableAll(),this.appManager.cubeGeometry.disableAllCube()}},{key:"toggleCubeMode",value:function(){g.modePlane&&this.toggleWallMode(),g.disableAllWallMode(),this.appManager.wallGeometry.disableAll(),g.modeCube=!g.modeCube,console.log("Cube Mode :",g.modeCube),g.modeCube&&!g.modeCube_CreateNewCube&&this.appManager.DHCursor.updateMsg("Select Options from below"),this.appManager.cubeGeometry.enableDefaultOptionsUI(),g.modeCube?this.appManager.cubeGeometry.enableAllCube():this.appManager.cubeGeometry.disableAllCube()}},{key:"toggleEditRoomMode",value:function(){g.modeCube&&this.toggleCubeMode(),g.modePlane&&this.toggleWallMode(),g.modeCube_editRoom=!g.modeCube_editRoom,g.modeCube_editRoom&&(g.modeCube_edit_CubeWallUVPosition=!1,this.appManager.cubeGeometry.enableAllCube(),this.appManager.cubeGeometry.enableEditRoom(),this.appManager.wallGeometry.enableAll(),this.appManager.wallGeometry.enableEditRoom())}}]),o}(),E=a(12),V=a(20),U=a(24),T=function(){function o(e){Object(m.a)(this,o),this.appManager=void 0,this.canvas=void 0,this.engine=void 0,this.scene=void 0,this.camera=void 0,this.appManager=e,this.setScene(),this.setCamera(),this.setEnvironment()}return Object(u.a)(o,[{key:"getCanvas",value:function(){return this.canvas}},{key:"setScene",value:function(){this.canvas=document.getElementById("renderCanvas"),this.engine=new E.a(this.canvas),this.scene=new V.a(this.engine)}},{key:"getScene",value:function(){return this.scene}},{key:"getEngine",value:function(){return this.engine}},{key:"setCamera",value:function(){this.camera=new c.b("camera1",0,0,0,new U.j(0,0,0),this.scene),this.camera.setPosition(new U.j(0,0,.1)),this.camera.attachControl(this.canvas,!0),this.camera.minZ=0,this.camera.inertia=.7,this.camera.lowerRadiusLimit=this.camera.upperRadiusLimit=this.camera.radius=1,this.camera.lowerBetaLimit=this.camera.upperBetaLimit=this.camera.beta=1.56}},{key:"getCamera",value:function(){return this.camera}},{key:"setEnvironment",value:function(){var o=this;this.scene.activeCamera=this.camera,this.scene.createDefaultLight(),this.engine.runRenderLoop((function(){o.scene.render()})),window.addEventListener("resize",(function(){o.scene.render()}),!1),this.camera.onViewMatrixChangedObservable.add((function(){o.appManager.wallGeometry&&o.appManager.wallGeometry.update()}))}}]),o}(),F=a(168),A=function(){function o(e){Object(m.a)(this,o),this.sceneManager=void 0,this.scene=void 0,this.sphere=void 0,this.sceneManager=e,this.scene=this.sceneManager.getScene(),this.createSphere()}return Object(u.a)(o,[{key:"getSphere",value:function(){return this.sphere}},{key:"createSphere",value:function(){this.sphere=F.b.CreateSphere("sphere",{diameter:2*g.radius},this.scene),this.sphere.scaling.set(1,-1,1),this.sphere.isPickable=!1,this.sphere.isVisible=!0,this.sphere.position.set(0,0,0)}},{key:"changeRoomMaterial",value:function(o){this.sphere.material=o}},{key:"createRoomMaterial",value:function(o){var e=new c.i("pbr",this.scene);return e.metallic=0,e.roughness=1,console.log(e),e._albedoTexture=new c.l(o,this.scene),e.backFaceCulling=!1,e}},{key:"toggleSphere",value:function(o){this.sphere.isVisible=!this.sphere.isVisible,o&&(this.sphere.isVisible=o)}}]),o}(),H=function(){function o(){Object(m.a)(this,o),this.jsonManager=void 0,this.sceneManager=void 0,this.sphereManager=void 0,this.roomManager=void 0,this.materialManager=void 0,this.cameraManager=void 0,this.eventsManager=void 0,this.modeManger=void 0,this.wallGeometry=void 0,this.cubeGeometry=void 0,this.editRoomManager=void 0,this.handler=void 0,this.gizmoHandler=void 0,this.DHCursor=void 0,console.log("APP INIT"),this.jsonManager=new d(this),this.DHCursor=new z(this),this.sceneManager=new T(this),this.sphereManager=new A(this.sceneManager),this.materialManager=new _(this.sceneManager.getScene()),this.roomManager=new N(this),this.cameraManager=new x(this),this.handler=new k(this),this.wallGeometry=new G(this),this.cubeGeometry=new b(this),this.editRoomManager=new h(this),this.eventsManager=new v(this),this.modeManger=new j(this),this.gizmoHandler=new f(this),this.setupJsToTsCallBack()}return Object(u.a)(o,[{key:"setupJsToTsCallBack",value:function(){var o=this;window.wplanMode=function(){o.modeManger.toggleWallMode()},window.wplaneModeCreateWall=function(){o.wallGeometry.enableCornerCreation()},window.wplaneModeCreateWallDone=function(){o.wallGeometry.createWallFinished()},window.wplaneModeMergeWithFirstCorner=function(){o.wallGeometry.createWallMergeWithFirstCorner()},window.wplaneModeEditWall=function(){o.wallGeometry.enableWallEdit()},window.wplaneModeEditWallDone=function(){o.wallGeometry.editSelectedWallDone()},window.wplaneModeMergeAllWalls=function(){o.wallGeometry.updateAllWallUv()},window.wplaneModeAdjustWallsFromTop=function(){o.wallGeometry.AdjustWallFromTop()},window.wplaneModeAdjustWallsFromTopDone=function(){o.wallGeometry.AdjustWallFromTopDone()},window.wplaneModeFloorDone=function(){o.wallGeometry.FloorDone()},window.wcubeMode=function(){o.modeManger.toggleCubeMode()},window.wcubeModeCreateNewCube=function(){o.cubeGeometry.enableNewCubeCreation()},window.wcubeModeEditCube=function(){o.cubeGeometry.uiEditCube()},window.wcubeModeEditCubeUV=function(e){o.cubeGeometry.EditCubeUV(e)},window.wtoggleEditRoomMode=function(){o.modeManger.toggleEditRoomMode()},window.editRoomModePosition=function(){o.editRoomManager.EditRoomPosition()},window.editRoomModeElementPosition=function(){o.editRoomManager.EditRoomElementPosition()},window.wEditRoomDone=function(){o.editRoomManager.DoneRoomEdit()},window.wDefaultCamera=function(){o.cameraManager.resetCamera()},window.wFreeCamera=function(){o.cameraManager.freeCamera()},window.wTopCamera=function(){o.cameraManager.setVerticalCamera()}}}]),o}();H.ConsoleEnable=void 0;var L=function(o){Object(p.a)(a,o);var e=Object(l.a)(a);function a(o){var r;return Object(m.a)(this,a),(r=e.call(this,o)).appInit=void 0,r.componentDidMount=function(){setTimeout((function(){r.appInit=new H,r.panelSet()}),2e3)},r.state={},r}return Object(u.a)(a,[{key:"render",value:function(){return Object(r.jsxs)("div",{id:"scene-container",children:[Object(r.jsx)("canvas",{id:"renderCanvas"}),Object(r.jsx)("div",{id:"cursor",className:"cursorBox",children:"Select Options From Side Menu"}),Object(r.jsx)("button",{id:"CreateWall",className:"LeftBottom40Button",onClick:this.planeModeCreateWall,children:"Create Walls"}),Object(r.jsx)("button",{id:"CreateWallDone",className:"LeftBottom40Button",onClick:this.planeModeCreateWallDone,children:"Done"}),Object(r.jsx)("button",{id:"MergeWithFirstCorner",className:"RightBottom40Button",onClick:this.planeModeMergeWithFirstCorner,children:"Merge With First Corner"}),Object(r.jsx)("button",{id:"EditWall",className:"RightBottom40Button",onClick:this.planeModeEditWall,children:"Edit Wall"}),Object(r.jsx)("button",{id:"EditWallDone",className:"BottomCenterButtom",onClick:this.planeModeEditWallDone,children:"Edit Wall Done"}),Object(r.jsx)("button",{id:"MergeAllWalls",className:"BottomCenterButtom",onClick:this.planeModeMergeAllWalls,children:"Merge All Walls"}),Object(r.jsx)("button",{id:"EditFromTop",className:"BottomCenterButtom",onClick:this.planeModeAdjustWallsFromTop,children:"Adjust Walls"}),Object(r.jsx)("button",{id:"EditFromTopDone",className:"BottomCenterButtom",onClick:this.planeModeAdjustWallsFromTopDone,children:"Adjust Walls done"}),Object(r.jsx)("button",{id:"FloorDone",className:"BottomCenterButtom",onClick:this.planeModeFloorDone,children:"Floor done"}),Object(r.jsx)("button",{id:"NewCube",className:"LeftBottom40Button",onClick:this.cubeModeCreateNewCube,children:"New Cube"}),Object(r.jsx)("button",{id:"EditCube",className:"RightBottom40Button",onClick:this.cubeModeEditCube,children:"Edit Cube"}),Object(r.jsxs)("div",{id:"EditCubeToggleParent",className:"BottomCenterButtomBgBottom15",children:["Texture Update",Object(r.jsxs)("label",{className:"switch",children:[Object(r.jsx)("input",{type:"checkbox",id:"CubeEditToggle",onClick:this.cubeModeEditCubeToggle}),Object(r.jsx)("span",{className:"slider"})]})]}),Object(r.jsx)("button",{id:"EditRoomPosition",className:"LeftBottom40Button",onClick:this.editRoomModePosition,children:"Adjust Room Position"}),Object(r.jsx)("button",{id:"EditRoomElementPosition",className:"LeftBottom40Button",onClick:this.editRoomModeElementPosition,children:"Adjust Room Element Position"}),Object(r.jsx)("button",{id:"DoneRoomEdit",className:"RightBottom40Button",onClick:this.editRoomModeDone,children:"Done"}),Object(r.jsxs)("div",{id:"mySidenav",className:"sidenav",children:[Object(r.jsx)("a",{href:"javascript:void(0)",className:"closebtn",children:"\xd7"}),Object(r.jsx)("button",{className:"accordion",children:"Change Rooms \xbb"}),Object(r.jsx)("div",{className:"accordionpanel",id:"accordionpanelChangeRoom"}),Object(r.jsx)("button",{className:"accordion2",children:"Enable Rooms \xbb"}),Object(r.jsx)("div",{className:"accordionpanel",id:"accordionpanelEnableRoom"}),Object(r.jsx)("button",{className:"accordion3",children:"Mode \xbb"}),Object(r.jsxs)("div",{className:"accordionpanel",id:"accordionpanelModes",children:[Object(r.jsx)("button",{onClick:this.planeMode,className:"accordionbutton",id:"Wall Create",children:"Wall"}),Object(r.jsx)("button",{onClick:this.cubeMode,className:"accordionbutton",id:"Wall Create",children:"Cube"}),Object(r.jsx)("button",{onClick:this.editRoomMode,className:"accordionbutton",id:"Edit Room",children:"Edit Room"})]}),Object(r.jsx)("button",{className:"accordion4",children:"Camera"}),Object(r.jsxs)("div",{className:"accordionpanel",id:"accordionpanelCamera",children:[Object(r.jsx)("button",{onClick:this.DefaultCamera,className:"accordionbutton",id:"Default Camera",children:"Default Camera"}),Object(r.jsx)("button",{onClick:this.FreeCamera,className:"accordionbutton",id:"Free Camera",children:"Free Camera"}),Object(r.jsx)("button",{onClick:this.TopCamera,className:"accordionbutton",id:"Top Camera",children:"Top Camera"})]})]}),Object(r.jsx)("span",{style:{fontSize:"30px",cursor:"pointer",position:"absolute"},onClick:this.openNav,children:"\u2630"}),Object(r.jsx)("div",{id:"myModal",className:"modal",children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsx)("span",{className:"close",children:"\xd7"}),Object(r.jsx)("p",{children:"Some text in the Modal.."}),Object(r.jsx)("p",{children:"Some text in the Modal.."}),Object(r.jsx)("button",{type:"button",className:"modalButton",children:"OK"})]})})]})}},{key:"DefaultCamera",value:function(){window.wDefaultCamera()}},{key:"FreeCamera",value:function(){window.wFreeCamera()}},{key:"TopCamera",value:function(){window.wTopCamera()}},{key:"openNav",value:function(){document.getElementById("mySidenav").style.width="250px"}},{key:"closeNav",value:function(){document.getElementById("mySidenav").style.width="0px"}},{key:"panelSet",value:function(){var o=document.getElementsByClassName("accordion");o[0].classList.toggle("active"),o[0].addEventListener("click",(function(){var e=o[0].nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}));var e=document.getElementsByClassName("accordion2");e[0].addEventListener("click",(function(){e[0].classList.toggle("active");var o=e[0].nextElementSibling;"block"===o.style.display?o.style.display="none":o.style.display="block"}));var a=document.getElementsByClassName("accordion3");a[0].addEventListener("click",(function(){console.log(a[0]),a[0].classList.toggle("active");var o=a[0].nextElementSibling;"block"===o.style.display?o.style.display="none":o.style.display="block"}));var r=document.getElementsByClassName("accordion4");r[0].addEventListener("click",(function(){console.log(r[0]),r[0].classList.toggle("active");var o=r[0].nextElementSibling;"block"===o.style.display?o.style.display="none":o.style.display="block"}))}},{key:"planeMode",value:function(){document.getElementById("mySidenav").style.width="0px",window.wplanMode()}},{key:"planeModeCreateWall",value:function(){window.wplaneModeCreateWall()}},{key:"planeModeCreateWallDone",value:function(){window.wplaneModeCreateWallDone()}},{key:"planeModeMergeWithFirstCorner",value:function(){window.wplaneModeMergeWithFirstCorner()}},{key:"planeModeEditWall",value:function(){window.wplaneModeEditWall()}},{key:"planeModeEditWallDone",value:function(){window.wplaneModeEditWallDone()}},{key:"planeModeMergeAllWalls",value:function(){window.wplaneModeMergeAllWalls()}},{key:"planeModeAdjustWallsFromTop",value:function(){window.wplaneModeAdjustWallsFromTop()}},{key:"planeModeAdjustWallsFromTopDone",value:function(){window.wplaneModeAdjustWallsFromTopDone()}},{key:"planeModeFloorDone",value:function(){window.wplaneModeFloorDone()}},{key:"cubeMode",value:function(){document.getElementById("mySidenav").style.width="0px",window.wcubeMode()}},{key:"cubeModeCreateNewCube",value:function(){window.wcubeModeCreateNewCube()}},{key:"cubeModeEditCube",value:function(){window.wcubeModeEditCube()}},{key:"cubeModeSelectCube",value:function(){window.wcubeModeEditCube()}},{key:"cubeModeEditCubeToggle",value:function(){var o=document.getElementById("CubeEditToggle");console.log(o.checked),window.wcubeModeEditCubeUV(o.checked)}},{key:"editRoomMode",value:function(){window.wtoggleEditRoomMode()}},{key:"editRoomModePosition",value:function(){window.wEditRoomPosition()}},{key:"editRoomModeElementPosition",value:function(){window.weditRoomModeElementPosition()}},{key:"editRoomModeDone",value:function(){window.wEditRoomDone()}}]),a}(t.Component),S=function(o){o&&o instanceof Function&&a.e(3).then(a.bind(null,207)).then((function(e){var a=e.getCLS,r=e.getFID,t=e.getFCP,n=e.getLCP,i=e.getTTFB;a(o),r(o),t(o),n(o),i(o)}))};s.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(L,{})}),document.getElementById("root")),S()}},[[206,1,2]]]);
//# sourceMappingURL=main.51a51218.chunk.js.map